{"version":3,"sources":["shark.js"],"names":["cc","Class","extends","Component","properties","sharkFin","Node","sharkAni","sharkSwimSpeed","ani","isSharkSwim","canSharkJump","init","game","onLoad","_this","getComponent","Animation","openCollider","configInit","openSharkTimer","gameInit","director","getCollisionManager","enabled","enabledDrawBoundingBox","closeCollider","width","active","schedule","sharkJump","gameConfig","sharkJumpDurTime","GameDataManager","isGameOver","setCurrentTime","play","x","start","callFunc","jumpUp","moveTo","v2","easing","easeIn","turnAround","jumpTo","jumpDown","finish","sequence","runAction","unschedule","update","dt"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,kBAASL,GAAGM,IADJ;AAERC,kBAASP,GAAGM,IAFJ;AAGRE,wBAAe,CAHP;AAIRC,aAAI,IAJI;AAKRC,qBAAY,IALJ;AAMRC,sBAAa;AANL,KAFP;AAULC,QAVK,gBAUAC,IAVA,EAUK;AACP,aAAKA,IAAL,GAAYA,IAAZ;AACF,KAZI;AAaLC,UAbK,oBAaK;AACN,YAAIC,QAAQ,IAAZ;AACA,aAAKN,GAAL,GAAW,KAAKF,QAAL,CAAcS,YAAd,CAA2BhB,GAAGiB,SAA9B,CAAX;AACA,aAAKC,YAAL;AACA,aAAKC,UAAL;AACA,aAAKC,cAAL;AACH,KAnBI;AAoBLC,YApBK,sBAoBK;AACN,aAAKD,cAAL;AACH,KAtBI;;AAuBL;AACAF,gBAxBK,0BAwBS;AACVlB,WAAGsB,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACA;AACAxB,WAAGsB,QAAH,CAAYC,mBAAZ,GAAkCE,sBAAlC,GAA2D,IAA3D;AACH,KA5BI;;AA6BL;AACAC,iBA9BK,2BA8BU;AACX1B,WAAGsB,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,KAA5C;AACA;AACAxB,WAAGsB,QAAH,CAAYC,mBAAZ,GAAkCE,sBAAlC,GAA2D,KAA3D;AACH,KAlCI;AAmCLN,cAnCK,wBAmCO;AACR,aAAKX,cAAL,GAAsB,CAAtB;AACA,aAAKE,WAAL,GAAmB,IAAnB;AACA,aAAKL,QAAL,CAAcsB,KAAd,GAAsB,GAAtB;AACA,aAAKtB,QAAL,CAAcuB,MAAd,GAAuB,IAAvB;AACA,aAAKrB,QAAL,CAAcqB,MAAd,GAAuB,KAAvB;AACH,KAzCI;;AA0CL;AACAR,kBA3CK,4BA2CW;AACZ,aAAKS,QAAL,CAAc,KAAKC,SAAnB,EAA6BC,qBAAWC,gBAAxC;AACH,KA7CI;;AA8CLF,eAAU,qBAAU;AAChB,YAAIf,QAAQ,IAAZ;AACA,YAAG,CAACkB,0BAAgBC,UAApB,EAA+B;AAC3B,iBAAKzB,GAAL,CAAS0B,cAAT,CAAwB,CAAxB;AACA,iBAAK1B,GAAL,CAAS2B,IAAT;AACA,iBAAK1B,WAAL,GAAmB,KAAnB;AACA,iBAAKL,QAAL,CAAcuB,MAAd,GAAuB,KAAvB;AACA,iBAAKrB,QAAL,CAAcqB,MAAd,GAAuB,IAAvB;AACA,iBAAKrB,QAAL,CAAc8B,CAAd,GAAkB,KAAKhC,QAAL,CAAcgC,CAAhC;AACA,gBAAIC,QAAQtC,GAAGuC,QAAH,CAAY,YAAY;AAChCxB,sBAAMG,YAAN;AACH,aAFW,CAAZ;AAGA,gBAAIsB,SAASxC,GAAGyC,MAAH,CAAU,CAAV,EAAYzC,GAAG0C,EAAH,CAAM,KAAKnC,QAAL,CAAc8B,CAApB,EAAsB,GAAtB,CAAZ,EAAwCM,MAAxC,CAA+C3C,GAAG4C,MAAH,CAAU,CAAV,CAA/C,CAAb;AACA,gBAAIlB,gBAAgB1B,GAAGuC,QAAH,CAAY,YAAY;AACxCxB,sBAAMW,aAAN;AACH,aAFmB,CAApB;AAGA,gBAAImB,aAAa7C,GAAG8C,MAAH,CAAU,GAAV,EAAc9C,GAAG0C,EAAH,CAAM,KAAKnC,QAAL,CAAc8B,CAAd,GAAgB,GAAtB,EAA0B,GAA1B,CAAd,EAA6C,GAA7C,EAAiD,CAAjD,CAAjB;AACA,gBAAIU,WAAW/C,GAAGyC,MAAH,CAAU,CAAV,EAAYzC,GAAG0C,EAAH,CAAM,KAAKnC,QAAL,CAAc8B,CAAd,GAAgB,GAAtB,EAA0B,CAAC,GAA3B,CAAZ,CAAf;AACA,gBAAIW,SAAShD,GAAGuC,QAAH,CAAY,YAAY;AACjCxB,sBAAMI,UAAN;AACAJ,sBAAMV,QAAN,CAAegC,CAAf,GAAmBtB,MAAMR,QAAN,CAAe8B,CAAlC;AACH,aAHY,CAAb;AAIA,gBAAI5B,MAAMT,GAAGiD,QAAH,CAAYX,KAAZ,EAAkBE,MAAlB,EAAyBd,aAAzB,EAAuCmB,UAAvC,EAAkDE,QAAlD,EAA2DC,MAA3D,CAAV;AACA,iBAAKzC,QAAL,CAAc2C,SAAd,CAAwBzC,GAAxB;AACH;AACD,YAAGwB,0BAAgBC,UAAnB,EAA8B;AAC1B,iBAAKiB,UAAL,CAAgB,KAAKrB,SAArB;AACH;AACJ,KA1EI;AA2ELQ,SA3EK,mBA2EI,CAAE,CA3EN;AA4ELc,UA5EK,kBA4EGC,EA5EH,EA4EO;AACR,YAAG,KAAK3C,WAAR,EAAoB;AAChB,iBAAKL,QAAL,CAAcgC,CAAd,IAAmB,KAAK7B,cAAxB;AACA,gBAAG,KAAKH,QAAL,CAAcgC,CAAd,GAAkB,CAAC,GAAtB,EAA0B;AACtB,qBAAKhC,QAAL,CAAcgC,CAAd,GAAkB,GAAlB;AACH;AACJ;AACJ;AAnFI,CAAT","file":"shark.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["import Util from './utils/util' ;\r\nimport Animation from './utils/animation';\r\nimport GameUITools from './utils/GameUITools';\r\nimport gameConfig from './gameConfig' ;\r\nimport GameDataManager from './gameDataManager';\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        sharkFin:cc.Node,\r\n        sharkAni:cc.Node,\r\n        sharkSwimSpeed:5,\r\n        ani:null,\r\n        isSharkSwim:true,\r\n        canSharkJump:true,\r\n    },\r\n    init(game){\r\n       this.game = game;\r\n    },\r\n    onLoad () {\r\n        var _this = this;\r\n        this.ani = this.sharkAni.getComponent(cc.Animation);\r\n        this.openCollider();\r\n        this.configInit();\r\n        this.openSharkTimer();\r\n    },\r\n    gameInit(){\r\n        this.openSharkTimer();\r\n    },\r\n    //开启碰撞检测\r\n    openCollider(){\r\n        cc.director.getCollisionManager().enabled = true;\r\n        //cc.director.getCollisionManager().enabledDebugDraw = true;\r\n        cc.director.getCollisionManager().enabledDrawBoundingBox = true;\r\n    },\r\n    //关闭碰撞检测\r\n    closeCollider(){\r\n        cc.director.getCollisionManager().enabled = false;\r\n        //cc.director.getCollisionManager().enabledDebugDraw = false;\r\n        cc.director.getCollisionManager().enabledDrawBoundingBox = false;\r\n    },\r\n    configInit(){\r\n        this.sharkSwimSpeed = 5;\r\n        this.isSharkSwim = true;\r\n        this.sharkFin.width = 200;\r\n        this.sharkFin.active = true;\r\n        this.sharkAni.active = false;\r\n    },\r\n    //开启鲨鱼跳跃定时\r\n    openSharkTimer(){\r\n        this.schedule(this.sharkJump,gameConfig.sharkJumpDurTime);\r\n    },\r\n    sharkJump:function(){\r\n        var _this = this;\r\n        if(!GameDataManager.isGameOver){\r\n            this.ani.setCurrentTime(0)\r\n            this.ani.play();\r\n            this.isSharkSwim = false;\r\n            this.sharkFin.active = false;\r\n            this.sharkAni.active = true;\r\n            this.sharkAni.x = this.sharkFin.x;\r\n            var start = cc.callFunc(function () {\r\n                _this.openCollider();\r\n            });\r\n            var jumpUp = cc.moveTo(1,cc.v2(this.sharkAni.x,200)).easing(cc.easeIn(3));\r\n            var closeCollider = cc.callFunc(function () {\r\n                _this.closeCollider();\r\n            });\r\n            var turnAround = cc.jumpTo(0.8,cc.v2(this.sharkAni.x-400,200),100,1)\r\n            var jumpDown = cc.moveTo(1,cc.v2(this.sharkAni.x-400,-500));\r\n            var finish = cc.callFunc(function () {\r\n                _this.configInit();\r\n                _this.sharkFin.x = _this.sharkAni.x;\r\n            });\r\n            var ani = cc.sequence(start,jumpUp,closeCollider,turnAround,jumpDown,finish);\r\n            this.sharkAni.runAction(ani);\r\n        }\r\n        if(GameDataManager.isGameOver){\r\n            this.unschedule(this.sharkJump);\r\n        }\r\n    },\r\n    start () {},\r\n    update (dt) {\r\n        if(this.isSharkSwim){\r\n            this.sharkFin.x -= this.sharkSwimSpeed;\r\n            if(this.sharkFin.x < -500){\r\n                this.sharkFin.x = 500\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}