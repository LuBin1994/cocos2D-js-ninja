{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\start.js"],"names":["cc","Class","extends","Component","properties","startBtn","Node","ruleBtn","rankBtn","modeChooseBtn","prefab","Prefab","btnSound","default","type","AudioClip","completeCount","totalCount","loadingMask","onLoad","init","GameConfig","IS_WX","wx","showShareMenu","getGameConfig","start","director","preloadScene","console","log","tex","Texture2D","modeBounce","_this","GameUITools","initPrefab","haveLoadData","active","Util","btnEvent","GameDataManager","everydayGameMax","loadingScene","localStorage","setItem","createVideoAdv","videoAdv","gameIncrease","loadingLayer","auths_Btn","hide","rankMax","rankIncrease","switchModelMax","modelIncrease","getItem","haveGetGameConfig","getUserSystemInfo","getOtherShareCode","request","url","INTER_URL","method","success","res","data","status","config","toolChoose","parseInt","defaultModel","setGameDifficulty","difficulty","setGametimes","onShareAppMessage","title","shareTitle","imageUrl","shareImg","query","getStorageSync","gameLog","info","getSystemInfo","systemInfo","system","brand","model","pixelRatio","screenWidth","screenHeight","version","platform","SDKVersion","benchmarkLevel","getLaunchOptionsSync","shareCode","enterShareConfig","enterShareCode","path","node","scale1","scaleTo","scale2","ani","sequence","ani1","repeatForever","runAction","today","getDate","update","dt"],"mappings":"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","file":"start.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["import Util from './utils/util';\r\nimport GameUITools from './utils/GameUITools';\r\nimport GameDataManager from './gameDataManager';\r\nimport GameConfig from './gameConfig';\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        startBtn: cc.Node,\r\n        ruleBtn: cc.Node,\r\n        rankBtn: cc.Node,\r\n        modeChooseBtn: cc.Node,\r\n        prefab: [cc.Prefab],\r\n        btnSound: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        completeCount: 0,\r\n        totalCount: 2,\r\n        loadingMask: cc.Node\r\n    },\r\n    onLoad() {\r\n        this.init();\r\n        if (GameConfig.IS_WX) {\r\n            wx.showShareMenu();//显示转发按钮\r\n            this.getGameConfig();\r\n        }\r\n    },\r\n    start() {\r\n        cc.director.preloadScene(\"game\", () => {\r\n            console.log(\"游戏场景已加载\");\r\n        });\r\n        this.tex = new cc.Texture2D();\r\n        this.modeBounce(this.startBtn);\r\n    },\r\n    init() {\r\n        var _this = this;\r\n        if (GameConfig.IS_WX) {\r\n            //头像预制\r\n            GameUITools.initPrefab(this.prefab[1]);\r\n            if (GameConfig.haveLoadData) {\r\n                this.loadingMask.active = false;\r\n            }\r\n            else {\r\n                this.loadingMask.active = true;\r\n            }\r\n        }\r\n        //音乐\r\n        GameUITools.initPrefab(this.prefab[0]);\r\n        //更多游戏\r\n        GameUITools.initPrefab(this.prefab[2]);\r\n        //开始游戏\r\n        Util.btnEvent(this.startBtn, this.btnSound, function () {\r\n            if (GameDataManager.everydayGameMax != 0) {\r\n                GameUITools.loadingScene(\"game\");\r\n                GameDataManager.everydayGameMax--;\r\n                localStorage.setItem('everydayGameMax', GameDataManager.everydayGameMax);\r\n            }\r\n            else {\r\n                Util.createVideoAdv('adunit-2a1eec952b1c6e4c', GameConfig.videoAdv, function () {\r\n                    GameUITools.loadingScene(\"game\");\r\n                    GameDataManager.everydayGameMax += GameConfig.gameIncrease;\r\n                    GameDataManager.everydayGameMax--;\r\n                    localStorage.setItem('everydayGameMax', GameDataManager.everydayGameMax)\r\n                })\r\n            }\r\n        });\r\n        //弹出规则\r\n        Util.btnEvent(this.ruleBtn, this.btnSound, function () {\r\n            GameUITools.loadingLayer(\"panel/rule\");\r\n            if (GameConfig.auths_Btn) {\r\n                GameConfig.auths_Btn.hide();\r\n            }\r\n        });\r\n        //弹出排名\r\n        Util.btnEvent(this.rankBtn, this.btnSound, function () {\r\n            if (GameDataManager.rankMax != 0) {\r\n                GameDataManager.rankMax--;\r\n                localStorage.setItem('rankMax', GameDataManager.rankMax);\r\n                GameUITools.loadingLayer(\"panel/rank\");\r\n                if (GameConfig.auths_Btn) {\r\n                    GameConfig.auths_Btn.hide();\r\n                }\r\n            }\r\n            else {\r\n                Util.createVideoAdv('adunit-9429ed2ecefa9198', GameConfig.videoAdv, function () {\r\n                    GameDataManager.rankMax += GameConfig.rankIncrease;\r\n                    GameDataManager.rankMax--;\r\n                    localStorage.setItem('rankMax', GameDataManager.rankMax)\r\n                    GameUITools.loadingLayer(\"panel/rank\");\r\n                    if (GameConfig.auths_Btn) {\r\n                        GameConfig.auths_Btn.hide();\r\n                    }\r\n                })\r\n            }\r\n        });\r\n        //弹出模式选择\r\n        Util.btnEvent(this.modeChooseBtn, this.btnSound, function () {\r\n            if (GameDataManager.switchModelMax != 0) {\r\n                GameUITools.loadingLayer(\"panel/modeChoose\");\r\n            }\r\n            else {\r\n                Util.createVideoAdv('adunit-9429ed2ecefa9198', GameConfig.videoAdv, function () {\r\n                    GameDataManager.switchModelMax += GameConfig.modelIncrease;\r\n                    localStorage.setItem('switchModelMax', GameDataManager.switchModelMax);\r\n                    GameUITools.loadingLayer(\"panel/modeChoose\");\r\n                })\r\n            }\r\n        });\r\n        if (!localStorage.getItem('modeGuide')) {\r\n            GameUITools.loadingLayer(\"panel/modeChoose\");\r\n        }\r\n    },\r\n    //获取信息\r\n    getGameConfig() {\r\n        var _this = this\r\n        if (!GameConfig.haveGetGameConfig) {\r\n            //获取系统信息\r\n            this.getUserSystemInfo();\r\n            //获取由他人分享的shareCode\r\n            this.getOtherShareCode();\r\n            //从接口获取游戏配置\r\n            wx.request({\r\n                url: GameConfig.INTER_URL + \"game/getConfig\",\r\n                method: \"GET\",\r\n                success: function (res) {\r\n                    console.log(\"获取分享信息返回值：\", res.data)\r\n                    if (res.data.status == 1) {\r\n                        GameConfig.config = res.data.data;\r\n                        //设置默认模式\r\n                        GameDataManager.toolChoose = parseInt(GameConfig.config.defaultModel) - 1;\r\n                        //设置游戏难度\r\n                        Util.setGameDifficulty(parseInt(GameConfig.config.difficulty));\r\n                        //设置游戏奖励\r\n                        GameConfig.everydayGameMax = parseInt(GameConfig.config.everydayGameMax);\r\n                        GameConfig.gameIncrease = parseInt(GameConfig.config.gameIncrease);\r\n                        GameConfig.switchModelMax = parseInt(GameConfig.config.switchModelMax);\r\n                        GameConfig.modelIncrease = parseInt(GameConfig.config.modelIncrease);\r\n                        GameConfig.rankMax = parseInt(GameConfig.config.rankMax);\r\n                        GameConfig.rankIncrease = parseInt(GameConfig.config.rankIncrease);\r\n                        //设置每日游戏次数\r\n                        _this.setGametimes();\r\n                        _this.completeCount += 1;\r\n                        console.log('获取游戏配置参数', _this.completeCount, _this.totalCount)\r\n                        GameConfig.haveGetGameConfig = true;\r\n                        //用户点击了右上角“转发”按钮\r\n                        wx.onShareAppMessage(function (res) {\r\n                            return {\r\n                                title: GameConfig.config.shareTitle,\r\n                                imageUrl: GameConfig.config.shareImg,\r\n                                query: \"shareCode=\" + wx.getStorageSync('shareCode')\r\n                            }\r\n                        })\r\n                    }\r\n                    else {\r\n                        Util.gameLog(res.data.info)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    },\r\n    //获取用户系统信息\r\n    getUserSystemInfo() {\r\n        var _this = this;\r\n        wx.getSystemInfo({\r\n            success(res) {\r\n                GameConfig.systemInfo.system = res.system;\r\n                GameConfig.systemInfo.brand = res.brand;\r\n                GameConfig.systemInfo.model = res.model;\r\n                GameConfig.systemInfo.pixelRatio = res.pixelRatio;\r\n                GameConfig.systemInfo.screenWidth = res.screenWidth;\r\n                GameConfig.systemInfo.screenHeight = res.screenHeight;\r\n                GameConfig.systemInfo.version = res.version;\r\n                GameConfig.systemInfo.platform = res.platform;\r\n                GameConfig.systemInfo.SDKVersion = res.SDKVersion;\r\n                GameConfig.systemInfo.screenWidth = res.screenWidth;\r\n                GameConfig.systemInfo.benchmarkLevel = res.benchmarkLevel;\r\n                _this.completeCount += 1;\r\n                console.log('获取用户系统信息', _this.completeCount, _this.totalCount)\r\n            }\r\n        })\r\n    },\r\n    //获取由他人分享的shareCode\r\n    getOtherShareCode() {\r\n        var res = wx.getLaunchOptionsSync()\r\n        console.log(\"返回小程序启动参数\", res)\r\n        if (res.query.shareCode) {\r\n            GameConfig.enterShareConfig.enterShareCode = res.query.shareCode;\r\n            GameConfig.enterShareConfig.path = res.path;\r\n        }\r\n    },\r\n    modeBounce(node) {\r\n        var scale1 = cc.scaleTo(0.5, 0.9)\r\n        var scale2 = cc.scaleTo(0.5, 1)\r\n        var ani = cc.sequence(scale1, scale2);\r\n        var ani1 = cc.repeatForever(ani);\r\n        node.runAction(ani1);\r\n    },\r\n    //根据日期设置玩家可用次数\r\n    setGametimes() {\r\n        if (localStorage.getItem('date')) {\r\n            var today = Util.getDate();\r\n            if (!today == localStorage.getItem('date')) {\r\n                localStorage.setItem('date', today);\r\n                localStorage.setItem('everydayGameMax', GameConfig.everydayGameMax);\r\n                localStorage.setItem('switchModelMax', GameConfig.switchModelMax);\r\n                localStorage.setItem('rankMax', GameConfig.rankMax);\r\n                GameDataManager.everydayGameMax = GameConfig.everydayGameMax;\r\n                GameDataManager.rankMax = GameConfig.rankMax;\r\n                GameDataManager.switchModelMax = GameConfig.switchModelMax;\r\n            }\r\n            else {\r\n                GameDataManager.everydayGameMax = localStorage.getItem('everydayGameMax');\r\n                GameDataManager.rankMax = localStorage.getItem('rankMax');\r\n                GameDataManager.switchModelMax = localStorage.getItem('switchModelMax');\r\n            }\r\n        }\r\n        else {\r\n            var today = Util.getDate();\r\n            localStorage.setItem('date', today);\r\n            localStorage.setItem('everydayGameMax', GameConfig.everydayGameMax);\r\n            localStorage.setItem('switchModelMax', GameConfig.switchModelMax);\r\n            localStorage.setItem('rankMax', GameConfig.rankMax);\r\n            GameDataManager.everydayGameMax = GameConfig.everydayGameMax;\r\n            GameDataManager.rankMax = GameConfig.rankMax;\r\n            GameDataManager.switchModelMax = GameConfig.switchModelMax;\r\n        }\r\n    },\r\n    update(dt) {\r\n        if (!GameConfig.haveLoadData) {\r\n            if (this.completeCount == this.totalCount) {\r\n                console.log('已完成加载')\r\n                GameConfig.haveLoadData = true;\r\n                this.loadingMask.active = false;\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}