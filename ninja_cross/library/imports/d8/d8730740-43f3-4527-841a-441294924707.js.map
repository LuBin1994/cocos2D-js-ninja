{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\stage.js"],"names":["cc","Class","extends","Component","properties","stagePrefabs","Prefab","stagePools","doneStage","canRecycle","currentPlat","default","type","node","nextPlat","nextTwoPlat","currentPosX","nextPosX","nextTwoPosX","onLoad","_this","configInit","stagePoolInit","stageInit","init","game","opacity","gameInit","destroyAll","callbacks","i","length","newNodePool","NodePool","push","nextX","distance","centerDistance","getStage","Util","randomNum","setPosition","v2","parent","width","gameConfig","gameMoveSpeed","x","GameDataManager","toolChoose","stick","active","setStick","console","log","bridge","setBridge","energy","showCali","setCali","createStage","num1","num2","Math","floor","minMultiProbability","maxMultiProbability","chooseNum","setNextStage","num","stage","moveY","moveTo","fadeIn","ani","spawn","runAction","fog","showFog","recycleStage","children","parseInt","name","replace","put","removeAllChildren","getLength","Object","minLength","maxLength","min","max","hideStage","showStage","setStagePosX","size","get","instantiate","update","dt","isMove","childrens"],"mappings":"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","file":"stage.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["import gameConfig from './gameConfig';\r\nimport GameDataManager from './gameDataManager';\r\nimport Util from './utils/util';\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        stagePrefabs: [cc.Prefab],\r\n        stagePools: [],\r\n        doneStage: 0,//已通过的站台数\r\n        canRecycle: false,\r\n        currentPlat: {\r\n            default: null,\r\n            type: cc.node,\r\n        },\r\n        nextPlat: {\r\n            default: null,\r\n            type: cc.node,\r\n        },\r\n        nextTwoPlat: {\r\n            default: null,\r\n            type: cc.node,\r\n        },\r\n        currentPosX: 0,\r\n        nextPosX: 0,\r\n        nextTwoPosX: 0,\r\n    },\r\n    onLoad() {\r\n        var _this = this;\r\n        this.configInit();\r\n        this.stagePoolInit(function () { _this.stageInit(); });\r\n    },\r\n    init: function (game) {\r\n        this.game = game;\r\n    },\r\n    configInit: function () {\r\n        this.node.opacity = 255;\r\n        this.canRecycle = false;\r\n        this.doneStage = 0;\r\n    },\r\n    gameInit: function () {\r\n        this.destroyAll();\r\n        this.configInit();\r\n        this.stageInit();\r\n    },\r\n    //对象池，预制初始化\r\n    stagePoolInit: function (callbacks) {\r\n        for (var i = 0; i < this.stagePrefabs.length; i++) {\r\n            var newNodePool = new cc.NodePool();\r\n            this.stagePools.push(newNodePool);\r\n            if (i == 5) {\r\n                callbacks && callbacks();\r\n            }\r\n        }\r\n    },\r\n    //站桩初始化\r\n    stageInit: function () {\r\n        var nextX, distance, centerDistance;\r\n        //第一个站桩\r\n        this.currentPlat = this.getStage(Util.randomNum(3));\r\n        this.currentPlat.setPosition(cc.v2(-230, -295));\r\n        this.currentPlat.parent = this.node;\r\n        this.currentPosX = -230;\r\n        //第二个站桩\r\n        this.nextPlat = this.getStage(Util.randomNum(3));\r\n        distance = Util.randomNum(250) + 100;//随机距离\r\n        centerDistance = distance + (this.currentPlat.width / 2 + this.nextPlat.width / 2)\r\n        centerDistance = centerDistance - centerDistance % gameConfig.gameMoveSpeed;//两站装中心距离设置为移动速度的整数倍，防止移动过程中出现的偏差\r\n        nextX = this.currentPlat.x + centerDistance;\r\n        this.nextPlat.setPosition(cc.v2(nextX, -295));\r\n        this.nextPlat.parent = this.node;\r\n        this.nextPosX = nextX;\r\n        //第三个站桩\r\n        this.nextTwoPlat = this.getStage(Util.randomNum(3));\r\n        distance = Util.randomNum(250) + 100;//随机距离\r\n        centerDistance = distance + (this.nextPlat.width / 2 + this.nextTwoPlat.width / 2);\r\n        centerDistance = centerDistance - centerDistance % gameConfig.gameMoveSpeed;//两站装中心距离设置为移动速度的整数倍，防止移动过程中出现的偏差\r\n        nextX = this.nextPlat.x + centerDistance;\r\n        this.nextTwoPlat.setPosition(cc.v2(nextX, -295));\r\n        this.nextTwoPlat.parent = this.node;\r\n        this.nextTwoPosX = nextX;\r\n        //初始化设置道具\r\n        switch (GameDataManager.toolChoose) {\r\n            case 0:\r\n                this.game.stick.node.active = 1;\r\n                this.game.stick.setStick(this.currentPlat.x + this.currentPlat.width / 2);\r\n                console.log(this.game.stick.node)\r\n                break;\r\n            case 1:\r\n                this.game.bridge.node.active = true;\r\n                this.game.bridge.setBridge(this.currentPlat.x + this.currentPlat.width / 2);\r\n                break;\r\n            case 2:\r\n                this.game.energy.showCali();\r\n                this.game.energy.setCali();\r\n                break;\r\n        }\r\n    },\r\n    createStage: function () {\r\n        this.doneStage += 1;\r\n        var num1 = Util.randomNum(100);\r\n        var num2 = 100 - Math.floor(this.doneStage / 2) - gameConfig.minMultiProbability * 100;\r\n        if (num2 < 100 * (1 - gameConfig.maxMultiProbability)) {\r\n            num2 = 100 * (1 - gameConfig.maxMultiProbability);\r\n        }\r\n        var chooseNum = Util.randomNum(3);\r\n        if (num1 < num2) {   //抽取普通站台\r\n            this.setNextStage(chooseNum);\r\n        }\r\n        else {   //抽取多得分站台\r\n            if (GameDataManager.toolChoose == 1) {\r\n                this.setNextStage(chooseNum + 2);\r\n            }\r\n            else {\r\n                this.setNextStage(chooseNum + 3);\r\n            }\r\n        }\r\n    },\r\n    //设置下一个站桩\r\n    setNextStage: function (num) {\r\n        var stage, nextX, distance, centerDistance;\r\n        this.currentPlat = this.nextPlat;\r\n        this.nextPlat = this.nextTwoPlat;\r\n        stage = this.getStage(num);\r\n        this.nextTwoPlat = stage;\r\n        this.nextTwoPlat.parent = this.node;\r\n        this.nextTwoPlat.opacity = 0;\r\n        distance = Util.randomNum(250) + 100;//随机距离\r\n        centerDistance = distance + (this.nextPlat.width / 2 + this.nextTwoPlat.width / 2);\r\n        centerDistance = centerDistance - centerDistance % gameConfig.gameMoveSpeed;//两站装中心距离设置为移动速度的整数倍，防止移动过程中出现的偏差\r\n        nextX = this.nextPlat.x + centerDistance;\r\n        this.nextTwoPlat.setPosition(cc.v2(nextX, -605));\r\n\r\n        //记录站桩位置，游戏继续可用\r\n        this.currentPosX = this.currentPlat.x;\r\n        this.nextPosX = this.nextPlat.x;\r\n        this.nextTwoPosX = this.nextTwoPlat.x;\r\n\r\n        //新生成的站台动画\r\n        var moveY = cc.moveTo(1, cc.v2(nextX, -295));\r\n        var fadeIn = cc.fadeIn(1);\r\n        var ani = cc.spawn(moveY, fadeIn);\r\n        this.nextTwoPlat.runAction(ani);\r\n\r\n        //选择下个道具\r\n        if (GameDataManager.toolChoose !== 2) {\r\n            if (this.doneStage % 5 == 0) {\r\n                this.game.fog.showFog(this.nextPlat.x, -305)\r\n            }\r\n        }\r\n        if (GameDataManager.toolChoose == 2) {\r\n            //设置能量条刻度\r\n            this.game.energy.setCali();\r\n        }\r\n    },\r\n    //游戏一回合结束删除经过的站桩\r\n    recycleStage: function () {\r\n        var stage = this.node.children[0]\r\n        var num = parseInt(stage.name.replace(/[^0-9]/ig,\"\"))\r\n        this.stagePools[num-1].put(stage)\r\n    },\r\n    //删除所有站桩\r\n    destroyAll: function () {\r\n        this.node.removeAllChildren(true);\r\n    },\r\n    //获取到下一个站桩的最小距离和最大距离\r\n    getLength(){\r\n        var length = new Object();\r\n        //道具搭桥成功所需的最小长度\r\n        var minLength = Math.floor((this.nextPlat.x - this.currentPlat.x) - (this.nextPlat.width + this.currentPlat.width) / 2);\r\n        //道具搭桥成功所需的最大长度\r\n        var maxLength = Math.floor((this.nextPlat.x - this.currentPlat.x) + (this.nextPlat.width - this.currentPlat.width) / 2);\r\n        length.min = minLength;\r\n        length.max = maxLength;\r\n        return length;\r\n    },\r\n    hideStage() {\r\n        this.node.opacity = 0;\r\n    },\r\n    showStage() {\r\n        this.node.opacity = 255;\r\n    },\r\n    //设置游戏复活站桩位置\r\n    setStagePosX() {\r\n        this.currentPlat.setPosition(cc.v2(this.currentPosX, -295));\r\n        this.nextPlat.setPosition(cc.v2(this.nextPosX, -295));\r\n        this.nextTwoPlat.setPosition(cc.v2(this.nextTwoPosX, -295));\r\n    },\r\n    getStage(num) {\r\n        var stage = null;\r\n        if (this.stagePools[num].size() > 0){\r\n            stage = this.stagePools[num].get();\r\n        }\r\n        else {\r\n            stage = cc.instantiate(this.stagePrefabs[num]);\r\n        }\r\n        return stage;\r\n    },\r\n    update(dt) {\r\n        if (GameDataManager.isMove) {\r\n            //所有站桩左移\r\n            var childrens = this.node.children;\r\n            for (var i = 0; i < childrens.length; i++) {\r\n                childrens[i].x -= gameConfig.gameMoveSpeed\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\n"]}