{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\GameOver.js"],"names":["cc","Class","extends","Component","properties","playAgainBtn","Node","advBtn","goBackHomeBtn","rankBtn","btnSound","AudioClip","bestScore","Label","nowScore","btnGroup","showOffbtn","onLoad","_this","loader","loadRes","err","prefab","node","instantiate","addChild","Util","btnEvent","gameConfig","canResurrectTime","active","game","reStartGame","GameUITools","loadingScene","loadingLayer","continueGame","IS_WX","GameDataManager","toolChoose","wx","shareAppMessage","title","imageUrl","init","showScore","localStorage","getItem","score","string","totalScore","setItem","gameScore","postMessage","messageType","MAIN_MENU_NUM"],"mappings":"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","file":"GameOver.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["import Util from './utils/util' ;\nimport GameUITools from './utils/GameUITools';\nimport gameConfig from './gameConfig' ;\nimport GameDataManager from './GameDataManager';\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        playAgainBtn:cc.Node,\n        advBtn:cc.Node,\n        goBackHomeBtn:cc.Node,\n        rankBtn:cc.Node,\n        btnSound:cc.AudioClip,\n        bestScore:cc.Label,\n        nowScore: cc.Label,\n        btnGroup:cc.Node,\n        showOffbtn:cc.Node,\n    },\n    onLoad () {\n        var _this = this;\n        //btn绑定事件\n        cc.loader.loadRes(\"panel/subCanvas\", (err, prefab) => {\n            if(!err){\n                let node = cc.instantiate(prefab);\n                _this.node.addChild(node);\n            }\n        });\n        Util.btnEvent(this.playAgainBtn,this.btnSound,function () {\n            gameConfig.canResurrectTime = 1;\n            _this.advBtn.active = true;\n            _this.game.reStartGame();\n            _this.node.active = false\n        });\n        Util.btnEvent(this.goBackHomeBtn,this.btnSound,function () {\n            GameUITools.loadingScene('start');\n            gameConfig.canResurrectTime = 1;\n        });\n        Util.btnEvent(this.rankBtn,this.btnSound,function () {\n            GameUITools.loadingLayer(\"panel/rank\")\n        });\n        Util.btnEvent(this.advBtn,this.btnSound,function () {\n            gameConfig.canResurrectTime -= 1;\n            _this.game.continueGame();\n            _this.node.active = false\n        });\n        Util.btnEvent(this.showOffbtn,this.btnSound,function () {\n            if(gameConfig.IS_WX){\n                switch (GameDataManager.toolChoose) {\n                    case 0:\n                        wx.shareAppMessage({\n                            title: '@你,快来超越我吧',\n                            imageUrl:\"https://st.gwold.com/wfclb/ninja/pic/stickmode.png\"\n                        });\n                        break;\n                    case 1:\n                        wx.shareAppMessage({\n                            title: '@你,快来超越我吧',\n                            imageUrl:\"https://st.gwold.com/wfclb/ninja/pic/bridgemode.png\"\n                        });\n                        break;\n                    case 2:\n                        wx.shareAppMessage({\n                            title: '@你,快来超越我吧',\n                            imageUrl:\"https://st.gwold.com/wfclb/ninja/pic/jumpmode.jpg\"\n                        });\n                        break;\n                }\n            }\n        });\n    },\n    init:function(game){\n       this.game = game;\n    },\n    showScore:function(){\n        if (localStorage.getItem(\"score\")) {\n            var score = localStorage.getItem(\"score\");\n            this.nowScore.string = \"本次分值: \" + GameDataManager.totalScore;\n            if (GameDataManager.totalScore > score) {\n                this.bestScore.string = \"历史最佳: \" + score;\n                localStorage.setItem(\"score\", GameDataManager.totalScore);\n            }\n            else {\n                this.bestScore.string = \"历史最佳: \" + score;\n            }\n        }\n        else{\n            this.nowScore.string = \"本次分值: \" + GameDataManager.totalScore;\n            this.bestScore.string = \"历史最佳: \" + GameDataManager.totalScore;\n            localStorage.setItem(\"score\", GameDataManager.totalScore)\n        }\n        //微信存储分数\n        var gameScore = GameDataManager.totalScore;\n        if(gameConfig.IS_WX){\n            wx.postMessage({messageType: 1, score: gameScore, MAIN_MENU_NUM: gameConfig.MAIN_MENU_NUM,});\n        }\n        if(gameConfig.IS_WX){\n            wx.postMessage({messageType: 3, MAIN_MENU_NUM: gameConfig.MAIN_MENU_NUM,});\n        }\n    }\n});\n"]}