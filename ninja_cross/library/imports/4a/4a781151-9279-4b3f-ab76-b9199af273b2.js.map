{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\start.js"],"names":["cc","Class","extends","Component","properties","startBtn","Node","ruleBtn","rankBtn","modeChooseBtn","btnSound","default","type","AudioClip","onLoad","init","wx","showShareMenu","getShareConfig","getUserSystemInfo","getOtherShareCode","start","director","preloadScene","console","log","tex","Texture2D","_this","GameConfig","IS_WX","GameUITools","loadingLayer","Util","btnEvent","loadingScene","request","url","INTER_URL","method","success","res","data","status","config","haveSetMode","GameDataManager","toolChoose","parseInt","defaultModel","gameDifficultyNum","difficulty","setGameDifficulty","onShareAppMessage","title","shareTitle","imageUrl","shareImg","query","getStorageSync","gameLog","info","getSystemInfo","systemInfo","system","brand","model","pixelRatio","screenWidth","screenHeight","version","platform","SDKVersion","benchmarkLevel","getLaunchOptionsSync","shareCode","enterShareConfig","enterShareCode","path"],"mappings":"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","file":"start.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["import Util from './utils/util';\nimport GameUITools from './utils/GameUITools';\nimport GameDataManager from './gameDataManager';\nimport GameConfig from './gameConfig';\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        startBtn:cc.Node,\n        ruleBtn:cc.Node,\n        rankBtn:cc.Node,\n        modeChooseBtn:cc.Node,\n        btnSound:{\n            default: null,\n            type: cc.AudioClip\n        }\n    },\n    onLoad () {\n        this.init();\n        wx.showShareMenu();//显示转发按钮\n        this.getShareConfig();\n        this.getUserSystemInfo();\n        this.getOtherShareCode();\n    },\n    start (){\n        cc.director.preloadScene(\"game\", () => {\n           console.log(\"游戏场景已加载\");\n        });\n        this.tex = new cc.Texture2D();\n    },\n    init:function(){\n        var _this = this;\n        if(GameConfig.IS_WX){\n            GameUITools.loadingLayer(\"panel/userInfo\");\n        }\n        GameUITools.loadingLayer(\"panel/music\");\n        //开始游戏\n        Util.btnEvent(this.startBtn,this.btnSound,function(){\n            GameUITools.loadingScene(\"game\");\n        });\n        //弹出规则\n        Util.btnEvent(this.ruleBtn,this.btnSound,function(){\n            GameUITools.loadingLayer(\"panel/rule\");\n        });\n        //弹出排名\n        Util.btnEvent(this.rankBtn,this.btnSound,function(){\n            GameUITools.loadingLayer(\"panel/rank\");\n        });\n        //弹出模式选择\n        Util.btnEvent(this.modeChooseBtn,this.btnSound,function(){\n            GameUITools.loadingLayer(\"panel/modeChoose\")\n        });\n    },\n    //获取分享信息\n    getShareConfig() {\n        var _this = this\n        wx.request({\n            url: GameConfig.INTER_URL + \"game/getConfig\",\n            method: \"GET\",\n            success: function (res) {\n                console.log(\"获取分享信息返回值：\",res.data)\n                if (res.data.status == 1){\n                    GameConfig.config = res.data.data;\n                    if(!GameConfig.haveSetMode){\n                        GameDataManager.toolChoose = parseInt(res.data.data.defaultModel)-1;\n                        GameConfig.haveSetMode = true\n                    }\n                    var gameDifficultyNum = parseInt(GameConfig.config.difficulty)\n                    //设置游戏难度\n                    Util.setGameDifficulty(gameDifficultyNum)\n                    //用户点击了右上角“转发”按钮\n                    wx.onShareAppMessage(function (res){\n                        return {\n                            title: GameConfig.config.shareTitle,\n                            imageUrl:GameConfig.config.shareImg,\n                            query:\"shareCode=\"+wx.getStorageSync('shareCode')\n                        }\n                    })\n                }\n                else {\n                    Util.gameLog(res.data.info)\n                }\n            }\n        })\n    },\n    //获取用户系统信息\n    getUserSystemInfo(){\n        wx.getSystemInfo({\n            success (res){\n                GameConfig.systemInfo.system = res.system;\n                GameConfig.systemInfo.brand = res.brand;\n                GameConfig.systemInfo.model = res.model;\n                GameConfig.systemInfo.pixelRatio = res.pixelRatio;\n                GameConfig.systemInfo.screenWidth = res.screenWidth;\n                GameConfig.systemInfo.screenHeight = res.screenHeight;\n                GameConfig.systemInfo.version = res.version;\n                GameConfig.systemInfo.platform = res.platform;\n                GameConfig.systemInfo.SDKVersion = res.SDKVersion;\n                GameConfig.systemInfo.screenWidth = res.screenWidth;\n                GameConfig.systemInfo.benchmarkLevel = res.benchmarkLevel;\n            }\n        })\n    },\n    //获取由他人分享的shareCode\n    getOtherShareCode(){\n        var res = wx.getLaunchOptionsSync()\n        console.log(\"返回小程序启动参数\",res)\n        if(res.query.shareCode){\n            GameConfig.enterShareConfig.enterShareCode = res.query.shareCode\n            GameConfig.enterShareConfig.path = res.path\n        }\n    }\n});\n"]}