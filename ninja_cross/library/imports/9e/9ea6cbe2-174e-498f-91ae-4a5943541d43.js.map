{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\script\\panel/assets\\script\\panel\\subCanvas.js"],"names":["cc","Class","extends","Component","properties","onload","init","_this","GameConfig","IS_WX","CC_WECHATGAME","tex","Texture2D","window","sharedCanvas","width","height","start","_updateSubDomainCanvas","openDataContext","wx","getOpenDataContext","canvas","initWithElement","handleLoadedTexture","node","SpriteFrame","update"],"mappings":";;;;;;AACA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY,EAFP;AAKLC,UALK,oBAKG;AACJ,aAAKC,IAAL;AACH,KAPI;AAQLA,QARK,kBAQC;AACF,YAAIC,QAAQ,IAAZ;AACA,YAAGC,qBAAWC,KAAd,EAAoB;AAChB,gBAAIC,aAAJ,EAAmB;AACf,qBAAKC,GAAL,GAAW,IAAIX,GAAGY,SAAP,EAAX;AACAC,uBAAOC,YAAP,CAAoBC,KAApB,GAA4B,GAA5B;AACAF,uBAAOC,YAAP,CAAoBE,MAApB,GAA6B,IAA7B;AACH;AACJ;AACJ,KAjBI;AAkBLC,SAlBK,mBAkBI;AACL,aAAKN,GAAL,GAAW,IAAIX,GAAGY,SAAP,EAAX;AACH,KApBI;;AAqBL;AACAM,0BAtBK,oCAsBqB;AACtB,YAAI,CAAC,KAAKP,GAAV,EAAe;AACX;AACH;AACD,YAAIQ,kBAAkBC,GAAGC,kBAAH,EAAtB;AACA,YAAIP,eAAeK,gBAAgBG,MAAnC;AACA,aAAKX,GAAL,CAASY,eAAT,CAAyBT,YAAzB;AACA,aAAKH,GAAL,CAASa,mBAAT;AACA,aAAKC,IAAL,GAAY,IAAIzB,GAAG0B,WAAP,CAAmB,KAAKf,GAAxB,CAAZ;AACH,KA/BI;AAgCLgB,UAhCK,oBAgCK;AACN,YAAGnB,qBAAWC,KAAd,EAAoB;AAChB,iBAAKS,sBAAL;AACH;AACJ;AApCI,CAAT","file":"subCanvas.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\panel","sourcesContent":["\r\nimport GameConfig from '../gameConfig';\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n\r\n    },\r\n    onload(){\r\n        this.init();\r\n    },\r\n    init(){\r\n        var _this = this;\r\n        if(GameConfig.IS_WX){\r\n            if (CC_WECHATGAME) {\r\n                this.tex = new cc.Texture2D();\r\n                window.sharedCanvas.width = 750;\r\n                window.sharedCanvas.height = 1206;\r\n            }\r\n        }\r\n    },\r\n    start () {\r\n        this.tex = new cc.Texture2D();\r\n    },\r\n    // 刷新开放数据域的纹理\r\n    _updateSubDomainCanvas () {\r\n        if (!this.tex) {\r\n            return;\r\n        }\r\n        var openDataContext = wx.getOpenDataContext();\r\n        var sharedCanvas = openDataContext.canvas;\r\n        this.tex.initWithElement(sharedCanvas);\r\n        this.tex.handleLoadedTexture();\r\n        this.node = new cc.SpriteFrame(this.tex);\r\n    },\r\n    update () {\r\n        if(GameConfig.IS_WX){\r\n            this._updateSubDomainCanvas();\r\n        }\r\n    }\r\n});\r\n"]}