{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\player.js"],"names":["cc","Class","extends","Component","properties","anim","jumpHeight","onLoad","node","getComponent","Animation","stop","configInit","onCollisionEnter","other","GameDataManager","isSuccess","isMove","isGameOver","game","showGameOver","stopAllActions","stick","bridge","fall","x","y","init","gameInit","run","animState","play","repeatCount","Infinity","drop","distance","_this","runOver","moveTo","v2","finishRun","callFunc","easing","easeIn","ani","sequence","runAction","successJump","jump","jumpTo","finish","gainScore","scoreAni","showScoreFx","failJump","fninsh1","readyToJump","update","dt","toolChoose","gameConfig","gameMoveSpeed"],"mappings":"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","file":"player.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["import gameConfig from './gameConfig';\nimport GameDataManager from './GameDataManager';\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        anim:null,\n        jumpHeight:300,\n    },\n    onLoad(){\n        this.anim = this.node.getComponent(cc.Animation);\n        this.stop();\n        this.configInit();\n    },\n    //忍者与鲨鱼碰撞后执行事件\n    onCollisionEnter(other){\n        GameDataManager.isSuccess = false;\n        GameDataManager.isMove = false;\n        GameDataManager.isGameOver = true;\n        this.game.showGameOver();\n        this.node.stopAllActions();\n        this.game.stick.node.stopAllActions();\n        this.game.bridge.node.stopAllActions();\n        this.fall();\n    },\n    configInit:function(){\n        this.node.x = -210;\n        this.node.y = -295;\n    },\n    init:function(game){\n        this.game = game;\n    },\n    gameInit:function(){\n        this.configInit();\n        this.stop();\n    },\n    //奔跑\n    run:function(){\n        var animState = this.anim.play('playerRun');\n        animState.repeatCount = Infinity;\n    },\n    //停下\n    stop:function(){\n        var animState = this.anim.play('playerStand');\n        animState.repeatCount = 1;\n    },\n    //坠落\n    drop:function(distance){\n        var _this = this;\n        var runOver = cc.moveTo(0.5,cc.v2(-210+distance,-295));\n        var finishRun = cc.callFunc(function () {\n            var animState = _this.anim.play('playerFall');\n            animState.repeatCount = 1;\n        })\n        var fall = cc.moveTo(1,cc.v2(-210+distance,-1000)).easing(cc.easeIn(2.5));\n        var ani = cc.sequence(runOver,finishRun,fall);\n        this.node.runAction(ani);\n    },\n    fall(){\n        var animState = this.anim.play('playerFall');\n        animState.repeatCount = 1;\n        var fall = cc.moveTo(1,cc.v2(this.node.x,-1000)).easing(cc.easeIn(2.5));\n        this.node.runAction(fall);\n    },\n    //成功跳跃\n    successJump(distance,jumpHeight){\n        var _this = this;\n        this.anim.play('playerJump');\n        var jump = cc.jumpTo(1,cc.v2(-210+distance,-295),jumpHeight,1);\n        var finish = cc.callFunc(function () {\n            if(GameDataManager.isSuccess){\n                _this.stop();\n                GameDataManager.isMove = true;\n                _this.game.gainScore();\n                _this.game.scoreAni.showScoreFx();\n            }\n        })\n        var ani = cc.sequence(jump,finish)\n        this.node.runAction(ani);\n    },\n    //失败跳跃\n    failJump(distance,jumpHeight){\n        var _this = this;\n        this.anim.play('playerJump');\n        var jump = cc.jumpTo(1, cc.v2(-210 + distance, -295), jumpHeight, 1);\n        var fninsh1 = cc.callFunc(function () {\n            _this.anim.play('playerFall');\n            _this.game.showGameOver();\n        });\n        var fall = cc.moveTo(1.5, cc.v2(-210 + distance, -1000)).easing(cc.easeIn(2));\n        var ani = cc.sequence(jump, fninsh1, fall);\n        this.node.runAction(ani)\n    },\n    readyToJump(){\n        this.anim.play('playerReadyJump');\n    },\n    update (dt) {\n        if(GameDataManager.toolChoose == 2){\n            if (GameDataManager.isSuccess) {\n                if (GameDataManager.isMove) {\n                    this.node.x -= gameConfig.gameMoveSpeed;\n                }\n            }\n        }\n    }\n});\n"]}