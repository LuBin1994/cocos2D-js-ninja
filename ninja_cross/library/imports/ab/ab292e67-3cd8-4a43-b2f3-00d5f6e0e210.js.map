{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\bridge.js"],"names":["cc","Class","extends","Component","properties","bridgePrefab","Prefab","bridgeY","timer","bridgePool","onLoad","NodePool","i","bridgeUnit","instantiate","put","node","active","start","configInit","rotation","gameInit","opacity","buildBridge","size","get","parent","setPosition","v2","reSetBridge","_this","children","length","setBridge","x","update","dt","GameDataManager","isGameOver","isLengthen","isMove","gameConfig","gameMoveSpeed"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,sBAAaL,GAAGM,MADR;AAERC,iBAAQ,EAFA;AAGRC,eAAM,CAHE;AAIRC,oBAAW;AAJH,KAFP;AAQLC,UARK,oBAQI;AACL,aAAKD,UAAL,GAAkB,IAAIT,GAAGW,QAAP,EAAlB;AACA,aAAI,IAAIC,IAAE,CAAV,EAAYA,IAAE,CAAd,EAAgBA,GAAhB,EAAoB;AAChB,gBAAIC,aAAab,GAAGc,WAAH,CAAe,KAAKT,YAApB,CAAjB;AACA,iBAAKI,UAAL,CAAgBM,GAAhB,CAAoBF,UAApB;AACH;AACD,aAAKG,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH,KAfI;AAgBLC,SAhBK,mBAgBI,CAER,CAlBI;;AAmBLC,gBAAW,sBAAU;AACjB,aAAKH,IAAL,CAAUI,QAAV,GAAqB,CAArB;AACH,KArBI;AAsBLC,YAtBK,sBAsBK;AACN,aAAKL,IAAL,CAAUI,QAAV,GAAqB,CAArB;AACA,aAAKJ,IAAL,CAAUM,OAAV,GAAoB,GAApB;AACH,KAzBI;;AA0BLC,iBAAY,uBAAY;AACpB,YAAIV,UAAJ;AACA,YAAG,KAAKJ,UAAL,CAAgBe,IAAhB,KAAyB,CAA5B,EAA+B;AAAE;AAC7BX,yBAAa,KAAKJ,UAAL,CAAgBgB,GAAhB,EAAb;AACH,SAFD,MAGI;AAAE;AACFZ,yBAAab,GAAGc,WAAH,CAAe,KAAKT,YAApB,CAAb;AACH;AACDQ,mBAAWa,MAAX,GAAoB,KAAKV,IAAzB;AACAH,mBAAWc,WAAX,CAAuB3B,GAAG4B,EAAH,CAAM,CAAC,EAAP,EAAW,KAAKrB,OAAhB,CAAvB;AACA,aAAKA,OAAL,IAAgB,EAAhB;AACH,KArCI;AAsCLsB,iBAAY,uBAAU;AAClB,YAAIC,QAAQ,IAAZ;AACA,aAAKtB,KAAL,GAAa,CAAb;AACA,aAAKD,OAAL,GAAgB,CAAhB;AACA,YAAG,KAAKS,IAAL,CAAUe,QAAV,CAAmBC,MAAnB,GAA4B,CAA/B,EAAiC;AAC7B,iBAAI,IAAIpB,IAAE,CAAV,EAAYA,IAAE,KAAKI,IAAL,CAAUe,QAAV,CAAmBC,MAAjC,EAAwCpB,GAAxC,EAA4C;AACxC,qBAAKH,UAAL,CAAgBM,GAAhB,CAAoB,KAAKC,IAAL,CAAUe,QAAV,CAAmBnB,GAAnB,CAApB;AACH;AACJ;AACD,aAAKW,WAAL;AACH,KAhDI;AAiDLU,aAjDK,qBAiDKC,CAjDL,EAiDO;AACR,aAAKL,WAAL;AACA,aAAKb,IAAL,CAAUW,WAAV,CAAsB3B,GAAG4B,EAAH,CAAMM,CAAN,EAAQ,CAAC,GAAT,CAAtB;AACA,aAAKf,UAAL;AACH,KArDI;AAsDLgB,UAtDK,kBAsDEC,EAtDF,EAsDK;AACN,YAAG,CAACC,0BAAgBC,UAApB,EAA+B;AAC3B,gBAAGD,0BAAgBE,UAAnB,EAA8B;AAC1B,qBAAK/B,KAAL;AACA,oBAAG,KAAKA,KAAL,GAAW,EAAX,IAAiB,CAApB,EAAsB;AAClB,yBAAKe,WAAL;AACH;AACJ;AACD,gBAAGc,0BAAgBG,MAAnB,EAA0B;AACtB,qBAAKhC,KAAL,GAAa,CAAb;AACA,qBAAKQ,IAAL,CAAUkB,CAAV,IAAeO,qBAAWC,aAA1B;AACH;AACJ;AACJ;AAnEI,CAAT","file":"bridge.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["import gameConfig from './gameConfig';\r\nimport GameDataManager from './gameDataManager';\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        bridgePrefab:cc.Prefab,\r\n        bridgeY:90,\r\n        timer:0,\r\n        bridgePool:null\r\n    },\r\n    onLoad (){\r\n        this.bridgePool = new cc.NodePool();\r\n        for(var i=0;i<5;i++){\r\n            var bridgeUnit = cc.instantiate(this.bridgePrefab);\r\n            this.bridgePool.put(bridgeUnit)\r\n        }\r\n        this.node.active = false;\r\n    },\r\n    start () {\r\n\r\n    },\r\n    configInit:function(){\r\n        this.node.rotation = 0;\r\n    },\r\n    gameInit(){\r\n        this.node.rotation = 0;\r\n        this.node.opacity = 255;\r\n    },\r\n    buildBridge:function () {\r\n        var bridgeUnit;\r\n        if(this.bridgePool.size() > 0) { // 通过 size 接口判断对象池中是否有空闲的对象\r\n            bridgeUnit = this.bridgePool.get();\r\n        }\r\n        else{ // 如果没有空闲对象，也就是对象池中备用对象不够时，我们就用 cc.instantiate 重新创建\r\n            bridgeUnit = cc.instantiate(this.bridgePrefab);\r\n        }\r\n        bridgeUnit.parent = this.node\r\n        bridgeUnit.setPosition(cc.v2(-25, this.bridgeY));\r\n        this.bridgeY += 90;\r\n    },\r\n    reSetBridge:function(){\r\n        var _this = this;\r\n        this.timer = 0;\r\n        this.bridgeY  = 0;\r\n        if(this.node.children.length > 0){\r\n            for(var i=0;i<this.node.children.length;i++){\r\n                this.bridgePool.put(this.node.children[i--])\r\n            }\r\n        }\r\n        this.buildBridge();\r\n    },\r\n    setBridge(x){\r\n        this.reSetBridge();\r\n        this.node.setPosition(cc.v2(x,-305));\r\n        this.configInit();\r\n    },\r\n    update(dt){\r\n        if(!GameDataManager.isGameOver){\r\n            if(GameDataManager.isLengthen){\r\n                this.timer ++\r\n                if(this.timer%30 == 0){\r\n                    this.buildBridge();\r\n                }\r\n            }\r\n            if(GameDataManager.isMove){\r\n                this.timer = 0;\r\n                this.node.x -= gameConfig.gameMoveSpeed\r\n            }\r\n        }\r\n    }\r\n});\r\n"]}