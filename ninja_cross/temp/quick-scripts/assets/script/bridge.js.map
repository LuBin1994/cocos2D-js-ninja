{"version":3,"sources":["bridge.js"],"names":["cc","Class","extends","Component","properties","bridgeY","timer","onLoad","node","active","start","configInit","rotation","gameInit","opacity","buildBridge","_this","loader","loadRes","err","prefab","instantiate","setPosition","v2","addChild","reSetBridge","removeAllChildren","setBridge","x","update","dt","GameDataManager","isGameOver","isLengthen","isMove","gameConfig","gameMoveSpeed"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,iBAAQ,EADA;AAERC,eAAM;AAFE,KAFP;AAMLC,UANK,oBAMK;AACN,aAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH,KARI;AASLC,SATK,mBASI,CAER,CAXI;;AAYLC,gBAAW,sBAAU;AACjB,aAAKH,IAAL,CAAUI,QAAV,GAAqB,CAArB;AACH,KAdI;AAeLC,YAfK,sBAeK;AACN,aAAKL,IAAL,CAAUI,QAAV,GAAqB,CAArB;AACA,aAAKJ,IAAL,CAAUM,OAAV,GAAoB,GAApB;AACH,KAlBI;;AAmBLC,iBAAY,uBAAY;AACpB,YAAIC,QAAQ,IAAZ;AACAhB,WAAGiB,MAAH,CAAUC,OAAV,CAAkB,kBAAlB,EAAsC,UAACC,GAAD,EAAMC,MAAN,EAAiB;AACnD,gBAAI,CAACD,GAAL,EAAU;AACN,oBAAIX,OAAOR,GAAGqB,WAAH,CAAeD,MAAf,CAAX;AACAZ,qBAAKc,WAAL,CAAiBtB,GAAGuB,EAAH,CAAM,CAAC,EAAP,EAAWP,MAAMX,OAAjB,CAAjB;AACAW,sBAAMR,IAAN,CAAWgB,QAAX,CAAoBhB,IAApB;AACAQ,sBAAMX,OAAN,IAAiB,EAAjB;AACH;AACJ,SAPD;AAQH,KA7BI;AA8BLoB,iBAAY,uBAAU;AAClB,YAAIT,QAAQ,IAAZ;AACA,aAAKV,KAAL,GAAa,CAAb;AACA,aAAKD,OAAL,GAAgB,EAAhB;AACA,aAAKG,IAAL,CAAUkB,iBAAV,CAA4B,IAA5B;AACA1B,WAAGiB,MAAH,CAAUC,OAAV,CAAkB,kBAAlB,EAAsC,UAACC,GAAD,EAAMC,MAAN,EAAiB;AACnD,gBAAI,CAACD,GAAL,EAAU;AACN,oBAAIX,OAAOR,GAAGqB,WAAH,CAAeD,MAAf,CAAX;AACAZ,qBAAKc,WAAL,CAAiBtB,GAAGuB,EAAH,CAAM,CAAC,EAAP,EAAW,CAAX,CAAjB;AACAP,sBAAMR,IAAN,CAAWgB,QAAX,CAAoBhB,IAApB;AACH;AACJ,SAND;AAOH,KA1CI;AA2CLmB,aA3CK,qBA2CKC,CA3CL,EA2CO;AACR,aAAKH,WAAL;AACA,aAAKjB,IAAL,CAAUc,WAAV,CAAsBtB,GAAGuB,EAAH,CAAMK,CAAN,EAAQ,CAAC,GAAT,CAAtB;AACA,aAAKjB,UAAL;AACH,KA/CI;AAgDLkB,UAhDK,kBAgDEC,EAhDF,EAgDK;AACN,YAAG,CAACC,0BAAgBC,UAApB,EAA+B;AAC3B,gBAAGD,0BAAgBE,UAAnB,EAA8B;AAC1B,qBAAK3B,KAAL;AACA,oBAAG,KAAKA,KAAL,GAAW,EAAX,IAAiB,CAApB,EAAsB;AAClB,yBAAKS,WAAL;AACH;AACJ;AACD,gBAAGgB,0BAAgBG,MAAnB,EAA0B;AACtB,qBAAK5B,KAAL,GAAa,CAAb;AACA,qBAAKE,IAAL,CAAUoB,CAAV,IAAeO,qBAAWC,aAA1B;AACH;AACJ;AACJ;AA7DI,CAAT","file":"bridge.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["import gameConfig from './gameConfig';\nimport GameDataManager from './gameDataManager';\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        bridgeY:90,\n        timer:0,\n    },\n    onLoad () {\n        this.node.active = false;\n    },\n    start () {\n\n    },\n    configInit:function(){\n        this.node.rotation = 0;\n    },\n    gameInit(){\n        this.node.rotation = 0;\n        this.node.opacity = 255;\n    },\n    buildBridge:function () {\n        var _this = this;\n        cc.loader.loadRes('tools/bridgeUnit', (err, prefab) => {\n            if (!err) {\n                let node = cc.instantiate(prefab);\n                node.setPosition(cc.v2(-25, _this.bridgeY));\n                _this.node.addChild(node);\n                _this.bridgeY += 90;\n            }\n        });\n    },\n    reSetBridge:function(){\n        var _this = this;\n        this.timer = 0;\n        this.bridgeY  = 90;\n        this.node.removeAllChildren(true);\n        cc.loader.loadRes('tools/bridgeUnit', (err, prefab) => {\n            if (!err) {\n                let node = cc.instantiate(prefab);\n                node.setPosition(cc.v2(-25, 0));\n                _this.node.addChild(node);\n            }\n        });\n    },\n    setBridge(x){\n        this.reSetBridge();\n        this.node.setPosition(cc.v2(x,-305));\n        this.configInit();\n    },\n    update(dt){\n        if(!GameDataManager.isGameOver){\n            if(GameDataManager.isLengthen){\n                this.timer ++\n                if(this.timer%30 == 0){\n                    this.buildBridge();\n                }\n            }\n            if(GameDataManager.isMove){\n                this.timer = 0;\n                this.node.x -= gameConfig.gameMoveSpeed\n            }\n        }\n    }\n});\n"]}