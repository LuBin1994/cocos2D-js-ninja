{"version":3,"sources":["start.js"],"names":["cc","Class","extends","Component","properties","startBtn","Node","ruleBtn","rankBtn","modeChooseBtn","btnSound","default","type","AudioClip","onLoad","init","wx","showShareMenu","getShareConfig","_this","request","url","GameConfig","INTER_URL","method","success","res","console","log","data","status","config","gameDifficultyNum","parseInt","difficulty","Util","setGameDifficulty","info","start","director","preloadScene","tex","Texture2D","gameLog","GameUITools","loadingLayer","IS_WX","btnEvent","loadingScene","header","getStorageSync","GameDataManager","gameId","error"],"mappings":"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","file":"start.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["import Util from './utils/util';\nimport GameUITools from './utils/GameUITools';\nimport GameDataManager from './gameDataManager';\nimport GameConfig from './gameConfig';\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        startBtn:cc.Node,\n        ruleBtn:cc.Node,\n        rankBtn:cc.Node,\n        modeChooseBtn:cc.Node,\n        btnSound:{\n            default: null,\n            type: cc.AudioClip\n        }\n    },\n    onLoad () {\n        this.init();\n        wx.showShareMenu()//显示转发按钮\n        this.getShareConfig();\n    },\n    getShareConfig() {\n        var _this = this\n        //获取分享信息\n        wx.request({\n                url: GameConfig.INTER_URL + \"game/getConfig\",\n                method: \"GET\",\n                success: function (res) {\n                    console.log(res.data)\n                    if (res.data.status == 1){\n                        GameConfig.config = res.data.data;\n                        console.log(GameConfig)\n                        var gameDifficultyNum = parseInt(GameConfig.config.difficulty)\n                        //设置游戏难度\n                        Util.setGameDifficulty(gameDifficultyNum)\n                    }\n                    else {\n                        console.log(\"获取游戏配置信息失败\")\n                        console.log(res.data.info)\n                    }\n                }\n        })\n    },\n    start (){\n        cc.director.preloadScene(\"game\", () => {\n           console.log(\"游戏场景已加载\")\n        });\n        this.tex = new cc.Texture2D();\n        Util.gameLog(5,'测试日志接口')\n    },\n    init:function(){\n        var _this = this;\n        GameUITools.loadingLayer(\"panel/music\");\n        if(GameConfig.IS_WX){\n            GameUITools.loadingLayer(\"panel/userInfo\");\n        }\n        //开始游戏\n        Util.btnEvent(this.startBtn,this.btnSound,function(){\n            GameUITools.loadingScene(\"game\");\n            if(GameConfig.IS_WX){\n                //游戏开始获取gameId\n                wx.request({\n                    url:GameConfig.INTER_URL+\"game/start\",\n                    header: {\n                        'Cookie':\"SESSION=\"+wx.getStorageSync('sessionId')\n                    },\n                    method: \"POST\",\n                    success:function (res) {\n                        console.log(res.data)\n                        if(res.data.status == 1){\n                            GameDataManager.gameId = res.data.data;\n                        }\n                        else{\n                           console.log(res.data.info);\n                        }\n                    },\n                    error:function () {\n                        console.log(\"请求无响应\")\n                    }\n                });\n                Util.gameLog();\n            }\n            Util.gameLog()\n        });\n        //弹出规则\n        Util.btnEvent(this.ruleBtn,this.btnSound,function(){\n            GameUITools.loadingLayer(\"panel/rule\");\n        });\n        //弹出排名\n        Util.btnEvent(this.rankBtn,this.btnSound,function(){\n            GameUITools.loadingLayer(\"panel/rank\");\n        });\n        //弹出模式选择\n        Util.btnEvent(this.modeChooseBtn,this.btnSound,function(){\n            GameUITools.loadingLayer(\"panel/modeChoose\")\n        });\n    },\n});\n"]}