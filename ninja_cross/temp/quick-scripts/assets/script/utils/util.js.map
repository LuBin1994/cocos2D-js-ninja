{"version":3,"sources":["util.js"],"names":["Util","btnEvent","NODE","btnSound","CALLBACKS","on","setScale","GameDataManager","canSoundPlay","cc","audioEngine","playEffect","modeBtnEvent","gameStartDataInit","totalScore","isMove","isSuccess","canDrop","move","isAnimate","isLengthen","isStartLengthen","isGameOver","isHideSub","gameContinueDataInit","randomNum","multiple","Math","floor","random","setGameDifficulty","num","GameConfig","MaxMultiProbability","sharkJumpDurTime","gameLog","error","str","wx","request","url","LOG_URL","data","env","systemInfo","system","brand","model","pixelRatio","screenWidth","screenHeight","version","platform","sdkVersion","benchmarkLevel","header","getStorageSync","method","seccuss","res","status","console","log","info"],"mappings":"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","file":"util.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\utils","sourcesContent":["import GameDataManager from '../gameDataManager';\r\nimport GameConfig from '../gameConfig'\r\nvar Util = {\r\n    /**\r\n     * 普通按钮触摸效果\r\n     * @param NODE 按钮节点\r\n     * @param btnSound 按钮音效\r\n     * @param CALLBACKS touchend回调函数\r\n     */\r\n    btnEvent(NODE,btnSound,CALLBACKS){\r\n        NODE.on('touchstart',function(){\r\n            NODE.setScale(0.8);\r\n            if(GameDataManager.canSoundPlay){\r\n                cc.audioEngine.playEffect(btnSound,false,1);\r\n            }\r\n        });\r\n        NODE.on('touchend',function(){\r\n            NODE.setScale(1);\r\n            CALLBACKS && CALLBACKS();\r\n        });\r\n        NODE.on('touchcancel',function () {\r\n            NODE.setScale(1);\r\n            CALLBACKS && CALLBACKS();\r\n        })\r\n    },\r\n    /**\r\n     * 模式选择按钮触摸效果\r\n     * @param NODE 按钮节点\r\n     * @param btnSound 按钮音效\r\n     * @param CALLBACKS touchend回调函数\r\n     */\r\n    modeBtnEvent(NODE,btnSound,CALLBACKS){\r\n        NODE.on('touchstart',function(){\r\n            if(GameDataManager.canSoundPlay){\r\n                cc.audioEngine.playEffect(btnSound,false,1);\r\n            }\r\n        });\r\n        NODE.on('touchend',function(){\r\n            CALLBACKS && CALLBACKS();\r\n        });\r\n    },\r\n    /**\r\n     * 游戏开始或重开数据初始化\r\n     */\r\n    gameStartDataInit(){\r\n        GameDataManager.totalScore = 0;\r\n        GameDataManager.isMove = false;\r\n        GameDataManager.isSuccess = false;\r\n        GameDataManager.canDrop = false;\r\n        GameDataManager.move = 0;\r\n        GameDataManager.isAnimate = false;\r\n        GameDataManager.isLengthen = false;\r\n        GameDataManager.isStartLengthen = false;\r\n        GameDataManager.isGameOver = false;\r\n        GameDataManager.isHideSub = false;\r\n    },\r\n    /**\r\n     * 本局游戏继续数据初始化\r\n     */\r\n    gameContinueDataInit(){\r\n        GameDataManager.isMove = false;\r\n        GameDataManager.isSuccess = false;\r\n        GameDataManager.canDrop = false;\r\n        GameDataManager.move = 0;\r\n        GameDataManager.isAnimate = false;\r\n        GameDataManager.isLengthen = false;\r\n        GameDataManager.isStartLengthen = false;\r\n        GameDataManager.isGameOver = false;\r\n        GameDataManager.isHideSub = false;\r\n    },\r\n    /**\r\n     * 返回随机数，范围 0~multiple的整数\r\n     * @param multiple 随机数上限\r\n     */\r\n    randomNum(multiple){\r\n        return Math.floor(Math.random()*multiple);\r\n    },\r\n    /**\r\n     * 游戏难度设置\r\n     * @param num 游戏难度等级\r\n     */\r\n    setGameDifficulty(num){\r\n        GameConfig.MaxMultiProbability = 0.13+0.7*num;\r\n        GameConfig.sharkJumpDurTime = 40-3*num;\r\n    },\r\n    /**\r\n     * 游戏日志\r\n     * @param error 内容\r\n     */\r\n    gameLog(error){\r\n        var str = error\r\n        wx.request({\r\n            url:GameConfig.LOG_URL+'submit',\r\n            data:{\r\n                'code':2,\r\n                'env':GameConfig.env,\r\n                'content':str,\r\n                'system':GameConfig.systemInfo.system,\r\n                'brand':GameConfig.systemInfo.brand,\r\n                'model':GameConfig.systemInfo.model,\r\n                'pixelRatio':GameConfig.systemInfo.pixelRatio,\r\n                'screenWidth':GameConfig.systemInfo.screenWidth,\r\n                'screenHeight':GameConfig.systemInfo.screenHeight,\r\n                'version':GameConfig.systemInfo.version,\r\n                'platform':GameConfig.systemInfo.platform,\r\n                'sdkVersion':GameConfig.systemInfo.sdkVersion,\r\n                'benchmarkLevel':GameConfig.systemInfo.benchmarkLevel,\r\n            },\r\n            header: {\r\n                'content-type': 'application/x-www-form-urlencoded',\r\n                'sessionId':'SESSION='+wx.getStorageSync('sessionId')\r\n            },\r\n            method:\"POST\",\r\n            seccuss(res){\r\n                if(res.data.status){\r\n                    console.log('日志提交成功')\r\n                }\r\n                else{\r\n                  console.log(res.data.info)\r\n              }\r\n            }\r\n        })\r\n    }\r\n}\r\nexport default Util"]}