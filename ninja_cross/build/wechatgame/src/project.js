window.__require=function e(t,a,n){function o(s,c){if(!a[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var u="function"==typeof __require&&__require;if(!c&&u)return u(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+s+"'")}}var l=a[s]={exports:{}};t[s][0].call(l.exports,function(e){return o(t[s][1][e]||e)},l,l.exports,e,t,a,n)}return a[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({GameOver:[function(e,t,a){"use strict";cc._RF.push(t,"fd43bXqTxNI1qhSd3lYvTSr","GameOver");var n=c(e("./utils/util")),o=c(e("./utils/GameUITools")),i=c(e("./gameConfig")),s=c(e("./GameDataManager"));function c(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{playAgainBtn:cc.Node,advBtn:cc.Node,goBackHomeBtn:cc.Node,rankBtn:cc.Node,btnSound:cc.AudioClip,bestScore:cc.Label,nowScore:cc.Label,btnGroup:cc.Node,showOffbtn:cc.Node,showOffText:cc.Node},onLoad:function(){var e=this,t=this;cc.loader.loadRes("panel/moreGame",function(t,a){if(!t){var n=cc.instantiate(a);e.node.addChild(n)}}),n.default.btnEvent(this.playAgainBtn,this.btnSound,function(){t.game.reStartGame(),t.node.active=!1}),n.default.btnEvent(this.goBackHomeBtn,this.btnSound,function(){o.default.loadingScene("start")}),n.default.btnEvent(this.rankBtn,this.btnSound,function(){o.default.loadingLayer("panel/rank")}),n.default.btnEvent(this.advBtn,this.btnSound,function(){i.default.canResurrectTime-=1,t.game.continueGame(),t.node.active=!1}),i.default.IS_WX&&(n.default.btnEvent(this.showOffbtn,this.btnSound,function(){var e="shareCode="+wx.getStorageSync("shareCode");console.log(e),s.default.isBreakRecord?(console.log("\u7834\u7eaa\u5f55\u7684\u5206\u4eab"),wx.shareAppMessage({title:i.default.config.recordShareTitle,imageUrl:i.default.config.recordShareImg,query:e}),wx.request({url:i.default.INTER_URL+"game/share",data:{title:i.default.config.recordShareTitle,image:i.default.config.recordShareImg,query:wx.getStorageSync("shareCode")},header:{"content-type":"application/x-www-form-urlencoded",Cookie:"SESSION="+wx.getStorageSync("sessionId")},method:"POST",success:function(e){if(console.log(e.data),1==e.data.status)console.log("\u6e38\u620f\u5206\u4eab\u4fdd\u5b58\u6210\u529f");else switch(e.data.code){case 1005:console.log("\u6e38\u620f\u5206\u4eab\u4fdd\u5b58\u53c2\u6570\u9519\u8bef")}},error:function(){console.log("\u8fde\u63a5\u9519\u8bef")}})):(console.log("\u672a\u7834\u7eaa\u5f55\u7684\u5206\u4eab"),wx.shareAppMessage({title:i.default.config.passShareTitle,imageUrl:i.default.config.passShareImg,query:e}),wx.request({url:i.default.INTER_URL+"game/share",data:{title:i.default.config.passShareTitle,image:i.default.config.passShareImg,query:wx.getStorageSync("shareCode")},header:{"content-type":"application/x-www-form-urlencoded",Cookie:"SESSION="+wx.getStorageSync("sessionId")},method:"POST",success:function(e){if(console.log(e.data),1==e.data.status);else switch(e.data.code){case 1005:n.default.gameLog("\u6e38\u620f\u5206\u4eab\u4fdd\u5b58\u53c2\u6570\u9519\u8bef")}},error:function(){console.log("\u8fde\u63a5\u9519\u8bef")}}))}),cc.loader.loadRes("panel/subCanvas",function(e,a){if(!e){var n=cc.instantiate(a);t.node.addChild(n)}}))},init:function(e){this.game=e},showScore:function(){try{if(i.default.IS_WX){if(wx.getStorageSync("gameScore")){var e=wx.getStorageSync("gameScore");this.nowScore.string="\u672c\u6b21\u5206\u503c: "+s.default.totalScore,s.default.totalScore>e?(this.bestScore.string="\u5386\u53f2\u6700\u4f73: "+e,wx.setStorageSync("gameScore",s.default.totalScore),this.showOffText.active=!0,s.default.isHideSub=!0,s.default.isBreakRecord=!0):(this.showOffText.active=!1,s.default.isBreakRecord=!1,this.bestScore.string="\u5386\u53f2\u6700\u4f73: "+e,s.default.isHideSub=!1)}else this.nowScore.string="\u672c\u6b21\u5206\u503c: "+s.default.totalScore,this.bestScore.string="\u5386\u53f2\u6700\u4f73: "+s.default.totalScore,wx.setStorageSync("gameScore",s.default.totalScore),s.default.isHideSub=!0,s.default.isBreakRecord=!0;var t=s.default.totalScore;wx.postMessage({messageType:1,score:t,MAIN_MENU_NUM:i.default.MAIN_MENU_NUM}),wx.postMessage({messageType:3,MAIN_MENU_NUM:i.default.MAIN_MENU_NUM}),s.default.isHideSub&&wx.postMessage({messageType:5}),console.log("\u5c06\u8981\u4f20\u56de\u7684gameID",s.default.gameId),wx.request({url:i.default.INTER_URL+"game/over",data:{gameId:s.default.gameId,score:s.default.totalScore},header:{"content-type":"application/x-www-form-urlencoded",Cookie:"SESSION="+wx.getStorageSync("sessionId")},method:"POST",success:function(e){if(console.log("\u6e38\u620f\u6570\u636e\u8bb0\u5f55\u63a5\u53e3\u8fd4\u56de\u503c\uff1a",e.data),1==e.data.status);else switch(e.data.code){case 1004:n.default.gameLog("\u6e38\u620f\u4e0d\u5b58\u5728");break;case 1005:n.default.gameLog("\u6e38\u620f\u6570\u636e\u8bb0\u5f55\u53c2\u6570\u9519\u8bef")}},error:function(){n.default.gameLog("/game/over\u63a5\u53e3\u8c03\u7528\u5931\u8d25")}})}}catch(e){n.default.gameLog("\u6e38\u620f\u7ed3\u679c\u663e\u793a\u6a21\u5757\u9519\u8bef")}}}),cc._RF.pop()},{"./GameDataManager":"gameDataManager","./gameConfig":"gameConfig","./utils/GameUITools":"GameUITools","./utils/util":"util"}],GameUITools:[function(e,t,a){"use strict";cc._RF.push(t,"965b9tfL3BFaJsoNPKIlaNl","GameUITools"),Object.defineProperty(a,"__esModule",{value:!0});(function(e){e&&e.__esModule})(e("../gameDatamanager"));var n={loadingScene:function(e){cc.director.preloadScene(e,function(){cc.director.loadScene(e)})},loadingLayer:function(e){cc.loader.loadRes(e,function(e,t){if(!e){var a=cc.instantiate(t);cc.director.getScene().children[0].addChild(a)}})},initPrefab:function(e){var t=cc.instantiate(e);cc.director.getScene().children[0].addChild(t)},unLoadingLayer:function(e){cc.director.getScene().children[0].removeChild(e)}};a.default=n,t.exports=a.default,cc._RF.pop()},{"../gameDatamanager":"gameDataManager"}],animation:[function(e,t,a){"use strict";cc._RF.push(t,"34b5eoz/UhOp4hyKtM4ktBT","animation"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../gameDataManager"));var o={toolRotateAni:function(e,t,a){if(e){var o=cc.rotateBy(.7,90).easing(cc.easeIn(1)),i=cc.callFunc(function(){n.default.isMove=!0}),s=cc.sequence(o,i);t.runAction(s)}else{var c=cc.delayTime(.7),r=(o=cc.rotateBy(1.4,180).easing(cc.easeIn(1)),cc.moveTo(2,cc.v2(t.x,-1e4)).easing(cc.easeIn(2.5))),u=(i=cc.callFunc(function(){n.default.canDrop=!0}),cc.sequence(c,i,r));s=cc.spawn(o,u);t.runAction(s)}},scoreFx:function(e,t,a,n,o,i){e.setPosition(cc.v2(t,a)),e.opacity=255;var s=cc.fadeOut(i),c=cc.moveTo(i,cc.v2(n,o)),r=cc.spawn(s,c);e.runAction(r)}};a.default=o,t.exports=a.default,cc._RF.pop()},{"../gameDataManager":"gameDataManager"}],bridge:[function(e,t,a){"use strict";cc._RF.push(t,"ab2925nPNhKQ7LzANX24OIQ","bridge");var n=i(e("./gameConfig")),o=i(e("./gameDataManager"));function i(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{bridgePrefab:cc.Prefab,bridgeY:90,timer:0,bridgePool:null},onLoad:function(){this.bridgePool=new cc.NodePool;for(var e=0;e<5;e++){var t=cc.instantiate(this.bridgePrefab);this.bridgePool.put(t)}},init:function(){this.node.active=!1},configInit:function(){this.node.rotation=0},gameInit:function(){this.node.rotation=0,this.node.opacity=255},buildBridge:function(){var e;(e=this.bridgePool.size()>0?this.bridgePool.get():cc.instantiate(this.bridgePrefab)).parent=this.node,e.setPosition(cc.v2(-25,this.bridgeY)),this.bridgeY+=90},reSetBridge:function(){if(this.timer=0,this.bridgeY=0,this.node.children.length>0)for(var e=0;e<this.node.children.length;e++)this.bridgePool.put(this.node.children[e--]);this.buildBridge()},setBridge:function(e){this.reSetBridge(),this.node.setPosition(cc.v2(e,-305)),this.configInit()},update:function(e){o.default.isGameOver||(o.default.isLengthen&&(this.timer++,this.timer%30==0&&this.buildBridge()),o.default.isMove&&(this.timer=0,this.node.x-=n.default.gameMoveSpeed))}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager"}],energy:[function(e,t,a){"use strict";cc._RF.push(t,"c43999w48VE4btSEyWz28vL","energy");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./gameDataManager"));cc.Class({extends:cc.Component,properties:{energy:cc.Node,caliUp:cc.Node,caliDown:cc.Node,energySpeed:5},onLoad:function(){},init:function(e){this.game=e,this.hideCali()},configInit:function(){this.energy.height=0,this.energySpeed=5,this.node.opacity=255},gameInit:function(){this.energy.height=0,this.energySpeed=5,this.node.opacity=255,this.setCali()},setCali:function(){var e=this.game.stage.getLength(),t=Math.floor(e.min/600*300),a=Math.floor(e.max/600*300);this.caliUp.y=-147+a,this.caliDown.y=-147+t},showCali:function(){this.node.active=!0},hideCali:function(){this.node.active=!1},update:function(){2==n.default.toolChoose&&n.default.isLengthen&&(this.energy.height+=this.energySpeed,300!=this.energy.height&&0!=this.energy.height||(this.energySpeed*=-1))}}),cc._RF.pop()},{"./gameDataManager":"gameDataManager"}],fog:[function(e,t,a){"use strict";cc._RF.push(t,"e7e49tNaqVEI746VGh7yTu0","fog");var n=i(e("./gameConfig")),o=i(e("./gameDataManager"));function i(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.node.opacity=0},showFog:function(e,t){this.node.opacity=0,this.node.setPosition(cc.v2(e,t));var a=cc.fadeIn(.5);this.node.runAction(a),o.default.isShowFog=!0},hideFog:function(){var e=cc.fadeOut(1);this.node.runAction(e),this.node.opacity=0,o.default.isShowFog=!1},update:function(e){o.default.isMove&&(this.node.x-=n.default.gameMoveSpeed)}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager"}],gameBg:[function(e,t,a){"use strict";cc._RF.push(t,"3e816A1145CLLmyJsAk6IJD","gameBg");var n=i(e("./gameConfig")),o=i(e("./gameDataManager"));function i(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{far_bg:[cc.Node]},onLoad:function(){},start:function(){},init:function(e){this.game=e},bgMove:function(e,t){for(var a=0;a<e.length;a++){e[a].x-=t}},checkBgReset:function(e){if(e[0].getBoundingBox().xMax<=-375){var t=e.shift();e.push(t);e[0];t.x=1625}},update:function(e){o.default.isMove&&(this.bgMove(this.far_bg,n.default.gameBgMoveSpeed),this.checkBgReset(this.far_bg))}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager"}],gameConfig:[function(e,t,a){"use strict";cc._RF.push(t,"bae414A/XVASpQcak5z2DC3","gameConfig"),Object.defineProperty(a,"__esModule",{value:!0});a.default={isScreemCanTouch:!0,gameBgMoveSpeed:1,gameMoveSpeed:8,stickLength:0,stickLengthSpeed:5,minMultiProbability:.2,MaxMultiProbability:.5,canResurrectTime:0,sharkJumpDurTime:30,MAIN_MENU_NUM:1,IS_WX:!0,difficulty:1,IS_AUTHORIZE:!1,auths_Btn:null,INTER_URL:"https://wg.iwckj.com/risk/",LOG_URL:"https://log-ninja.iwckj.com/",env:"2",haveCheckLogin:!1,haveSetMode:!1,systemInfo:{system:null,brand:null,model:null,pixelRatio:null,screenWidth:null,screenHeight:null,version:null,platform:null,sdkVersion:null,benchmarkLevel:null},config:{},enterShareConfig:{enterShareCode:"",path:""},userInfo:{nickName:null,avatarUrl:null,country:null,province:null,city:null,sex:null,code:null}},t.exports=a.default,cc._RF.pop()},{}],gameDataManager:[function(e,t,a){"use strict";cc._RF.push(t,"4f8f5gTdfJOlIY0uP1DWkdf","gameDataManager"),Object.defineProperty(a,"__esModule",{value:!0});a.default={canSoundPlay:!0,totalScore:0,nextScore:0,addScoreGrade:1,isMove:!1,isSuccess:!1,canDrop:!1,move:0,moveDistance:0,isAnimate:!1,isShowFog:!1,isGameOver:!1,isLengthen:!1,isStartLengthen:!1,toolChoose:2,gameId:0,isBreakRecord:!1,isHideSub:!1},t.exports=a.default,cc._RF.pop()},{}],game:[function(e,t,a){"use strict";cc._RF.push(t,"1df98/AWT1MP7cbPP0zZBMT","game");var n=r(e("./utils/util")),o=r(e("./utils/animation")),i=r(e("./utils/GameUITools")),s=r(e("./GameConfig")),c=r(e("./gameDataManager"));function r(e){return e&&e.__esModule?e:{default:e}}var u=e("player"),l=e("gameBg"),d=e("stick"),f=e("GameOver"),g=e("scoreAni"),h=e("bridge"),m=e("fog"),p=e("energy"),S=e("shark"),v=e("stage");cc.Class({extends:cc.Component,properties:{player:u,gameBg:l,stick:d,bridge:h,fog:m,gameOver:f,scoreAni:g,energy:p,scoreDisplay:cc.Label,scoreGroup:cc.Node,gameOverSound:cc.AudioClip,shark:S,stage:v,prefabs:[cc.Prefab]},onLoad:function(){this.gameBg.init(this),this.gameOver.init(this),this.energy.init(this),this.bridge.init(),this.stick.init(),this.shark.init(this),this.player.init(this),this.init(),this.configInit(),this.node.opacity=0,this.stage.init(this),this.node.runAction(cc.fadeIn(.5)),n.default.gameStartDataInit()},init:function(){var e=this;switch(i.default.initPrefab(this.prefabs[1]),c.default.toolChoose){case 0:localStorage.getItem("stickGuide")||(console.log("\u68cd\u5b50\u65b0\u624b\u5f15\u5bfc"),i.default.loadingLayer("panel/guide"));break;case 1:localStorage.getItem("bridgeGuide")||(console.log("\u6865\u6881\u65b0\u624b\u5f15\u5bfc"),i.default.loadingLayer("panel/guide"));break;case 2:localStorage.getItem("jumpGuide")||(console.log("\u8df3\u8dc3\u65b0\u624b\u5f15\u5bfc"),i.default.loadingLayer("panel/guide"))}if(s.default.IS_WX&&i.default.initPrefab(this.prefabs[0]),this.node.on("touchstart",function(){s.default.isScreemCanTouch&&!c.default.isAnimate&&e.gameTouchStartProcessing()}),this.node.on("touchend",function(){s.default.isScreemCanTouch&&c.default.isStartLengthen&&e.gameTouchEndProcessing()}),s.default.IS_WX){var t=parseInt(c.default.toolChoose)+1;wx.request({url:s.default.INTER_URL+"game/start",data:{model:t},header:{"content-type":"application/x-www-form-urlencoded",Cookie:"SESSION="+wx.getStorageSync("sessionId")},method:"POST",success:function(e){console.log("\u6e38\u620f\u5f00\u59cb\u83b7\u53d6gameId\u8fd4\u56de\u503c\uff1a",e.data),1==e.data.status?c.default.gameId=e.data.data:n.default.gameLog(e.data.info)},error:function(){n.default.gameLog("game/start\u63a5\u53e3\u8c03\u7528\u5931\u8d25")}})}},configInit:function(){this.canShowGameOver=!0},continueGame:function(){switch(this.stage.setStagePosX(),this.stage.showStage(),c.default.toolChoose){case 0:this.stick.gameInit();break;case 1:this.bridge.gameInit()}this.stick.node.x=this.stage.currentPlat.x+this.stage.currentPlat.width/2,this.player.gameInit(),this.shark.gameInit(),this.setTool(),n.default.gameContinueDataInit(),this.configInit(),this.scoreDisplay.string=c.default.totalScore,0==s.default.canResurrectTime&&(this.gameOver.advBtn.active=!1),2==c.default.toolChoose&&this.energy.gameInit(),this.scoreGroup.opacity=255},reStartGame:function(){i.default.loadingScene("game")},gameTouchStartProcessing:function(){if(!c.default.isAnimate){switch(c.default.isLengthen=!0,c.default.isStartLengthen=!0,c.default.toolChoose){case 1:this.bridge.buildBridge();break;case 2:this.player.readyToJump()}if(cc.director.getScene().children[0].getChildByName("guide")){var e=cc.director.getScene().children[0].getChildByName("guide");cc.director.getScene().children[0].removeChild(e),cc.director.getScene().children[0].removeChild(e)}}},gameTouchEndProcessing:function(){switch(c.default.isLengthen=!1,c.default.toolChoose){case 0:localStorage.getItem("stickGuide")||localStorage.setItem("stickGuide",!0);break;case 1:localStorage.getItem("bridgeGuide")||localStorage.setItem("bridgeGuide",!0);break;case 2:localStorage.getItem("jumpGuide")||localStorage.setItem("jumpGuide",!0)}if(!c.default.isAnimate){var e=this.getToolLength();if(c.default.toolChoose<=1)c.default.moveDistance=Math.floor(this.stage.currentPlat.x-this.player.node.x+e+this.stage.currentPlat.width/2);else{var t=Math.floor(this.energy.energy.height/300*600);c.default.moveDistance=Math.floor(this.stage.currentPlat.x-this.player.node.x+t+this.stage.currentPlat.width/2)}this.successOrlose(e),c.default.isShowFog&&this.fog.hideFog(),c.default.isAnimate=!0}},successOrlose:function(e){var t=this,a=this.stage.getLength();if(a.min<=e&&e<=a.max?(n.default.culculateScore(this.stage.nextPlat,e,a.min),c.default.isSuccess=!0):c.default.isSuccess=!1,!c.default.isGameOver)switch(c.default.toolChoose){case 0:o.default.toolRotateAni(c.default.isSuccess,this.stick.node),setTimeout(function(){t.player.run()},700);break;case 1:o.default.toolRotateAni(c.default.isSuccess,this.bridge.node),setTimeout(function(){t.player.run()},700);break;case 2:c.default.isSuccess?this.player.successJump(c.default.moveDistance,t.player.jumpHeight):this.player.failJump(c.default.moveDistance,t.player.jumpHeight)}},allMove:function(e){c.default.move+=s.default.gameMoveSpeed,c.default.move>c.default.moveDistance&&e&&e()},getToolLength:function(){switch(c.default.toolChoose){case 0:return this.stick.node.height;case 1:return this.bridge.bridgeY;case 2:return Math.floor(this.energy.energy.height/300*600)}},setTool:function(){switch(c.default.toolChoose){case 0:this.stick.setStick(this.stage.currentPlat.x+this.stage.currentPlat.width/2);break;case 1:this.bridge.setBridge(this.stage.currentPlat.x+this.stage.currentPlat.width/2);break;case 2:this.player.stop()}},gainScore:function(){c.default.totalScore+=c.default.nextScore,this.scoreDisplay.string=c.default.totalScore},showGameOver:function(){this.canShowGameOver&&(c.default.isGameOver=!0,this.gameOver.showScore(),c.default.canSoundPlay&&cc.audioEngine.playEffect(this.gameOverSound,!1,1),this.scheduleOnce(function(){switch(c.default.toolChoose){case 0:this.stick.node.opacity=0;break;case 1:this.bridge.node.opacity=0;break;case 2:this.energy.node.opacity=0}this.scoreGroup.opacity=0,this.gameOver.node.active=!0,this.stage.hideStage()},1.5),this.fog.hideFog(),0==s.default.canResurrectTime?this.gameOver.advBtn.active=!1:this.gameOver.advBtn.active=!0),this.canShowGameOver=!1},update:function(e){var t=this;if(c.default.isAnimate&&(c.default.isMove&&c.default.isSuccess&&this.allMove(function(){c.default.isSuccess&&(c.default.isMove=!1,c.default.isAnimate=!1,c.default.move=0,t.stage.createStage(),t.stage.recycleStage(),2!==c.default.toolChoose&&(t.gainScore(),t.scoreAni.showScoreFx()),t.setTool(),t.player.stop(),2==c.default.toolChoose&&t.energy.configInit(),c.default.isStartLengthen=!1)}),!c.default.isSuccess&&c.default.canDrop)){var a=this.stage.currentPlat.x-this.player.node.x+this.stage.currentPlat.width/2;this.player.drop(a),this.showGameOver(),c.default.canDrop=!1}}}),cc._RF.pop()},{"./GameConfig":"gameConfig","./gameDataManager":"gameDataManager","./utils/GameUITools":"GameUITools","./utils/animation":"animation","./utils/util":"util",GameOver:"GameOver",bridge:"bridge",energy:"energy",fog:"fog",gameBg:"gameBg",player:"player",scoreAni:"scoreAni",shark:"shark",stage:"stage",stick:"stick"}],guide:[function(e,t,a){"use strict";cc._RF.push(t,"7a7beKW5fFApLTdL0R8VorZ","guide");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../gameDataManager"));cc.Class({extends:cc.Component,properties:{guideText:[cc.Node],finger:cc.Node,circle:cc.Node},onLoad:function(){this.fingerAni(),this.init()},init:function(){for(var e=0;e<this.guideText.length;e++)this.guideText[e].active=!1;switch(n.default.toolChoose){case 0:this.guideText[0].active=!0;break;case 1:this.guideText[1].active=!0;break;case 2:this.guideText[2].active=!0}},start:function(){},fingerAni:function(){var e=cc.fadeOut(1),t=cc.fadeIn(1),a=cc.sequence(e,t),n=cc.repeatForever(a);this.finger.runAction(n)}}),cc._RF.pop()},{"../gameDataManager":"gameDataManager"}],media:[function(e,t,a){"use strict";cc._RF.push(t,"2c155jeNwZDDbH6onjL9xfT","media");var n=i(e("../gameConfig")),o=i(e("../gameDataManager"));function i(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{musicOn:cc.Node,musicOff:cc.Node,bgm:cc.AudioClip,isMusicOn:!0},onLoad:function(){var e=this;cc.loader.load("https://cdn.feilaib.top/img/sounds/bg.mp3",function(t,a){e.bgm=a,e.musicInit()})},start:function(){},musicBtnDispaly:function(){this.musicOff.active=!this.musicOff.active,this.musicOn.active=!this.musicOn.active},musicInit:function(){var e=this;o.default.canSoundPlay?(this.musicOff.active=!1,cc.audioEngine.playMusic(this.bgm,!0,1)):this.musicOn.active=!1,this.musicOn.on("touchstart",function(){e.musicBtnDispaly(),o.default.canSoundPlay=!o.default.canSoundPlay,cc.audioEngine.pauseMusic(e.bgm,!0,1),n.default.isScreemCanTouch=!1,setTimeout(function(){n.default.isScreemCanTouch=!0},300)}),this.musicOff.on("touchstart",function(){e.musicBtnDispaly(),o.default.canSoundPlay=!o.default.canSoundPlay,cc.audioEngine.resumeMusic(e.bgm,!0,1),n.default.isScreemCanTouch=!1,setTimeout(function(){n.default.isScreemCanTouch=!0},300)})}}),cc._RF.pop()},{"../gameConfig":"gameConfig","../gameDataManager":"gameDataManager"}],modeChoose:[function(e,t,a){"use strict";cc._RF.push(t,"381e0h7o6JIt5IKsu6FA8Up","modeChoose");var n=s(e("../utils/util")),o=s(e("../utils/GameUITools")),i=s(e("../gameDataManager"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{stickMode:cc.Node,bridgeMode:cc.Node,jumpMode:cc.Node,modeChooseShow:[cc.Node],btnSound:{default:null,type:cc.AudioClip}},onLoad:function(){this.init(),this.showChoose()},init:function(){this.modeEvent(this.stickMode,this.btnSound,function(){i.default.toolChoose=0}),this.modeEvent(this.bridgeMode,this.btnSound,function(){i.default.toolChoose=1}),this.modeEvent(this.jumpMode,this.btnSound,function(){i.default.toolChoose=2})},showChoose:function(){for(var e=0;e<3;e++)this.modeChooseShow[e].active=!1;this.modeChooseShow[i.default.toolChoose].active=!0},modeEvent:function(e,t,a){var i=this;n.default.modeBtnEvent(e,t,function(){i.showChoose(),localStorage.getItem("modeGuide")?o.default.loadingScene("game"):(o.default.unLoadingLayer(i.node),localStorage.setItem("modeGuide",!0)),a&&a()})}}),cc._RF.pop()},{"../gameDataManager":"gameDataManager","../utils/GameUITools":"GameUITools","../utils/util":"util"}],moreGame:[function(e,t,a){"use strict";cc._RF.push(t,"7ca9bZC/q5IRa855P89qUku","moreGame");var n=i(e("../gameConfig")),o=i(e("../utils/util"));function i(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{app:{default:[],type:Array}},onLoad:function(){this.app=[{appName:"\u5fcd\u8005\u5bf9\u5bf9\u78b0",appId:"wx60dc6bacf553bdfc"},{appName:"\u5fcd\u8005\u9003\u4ea1",appId:"wx362bde88fb09a159"},{appName:"\u667a\u6167\u51b2\u51b2\u51b2",appId:"wx1e13b29ab6873da6"}];var e=this;this.rotate(),this.node.on("touchstart",function(){var t=o.default.randomNum(3);n.default.IS_WX&&wx.navigateToMiniProgram({appId:e.app[t].appId,success:function(a){wx.request({url:n.default.INTER_URL+"game/navigate",data:{appId:e.app[t].appId,name:e.app[t].appName,path:"",extraData:"",env:n.default.env},header:{"content-type":"application/x-www-form-urlencoded",Cookie:"SESSION="+wx.getStorageSync("sessionId")},method:"POST",success:function(e){if(console.log("\u8df3\u8f6c\u5230\u5176\u4ed6\u5c0f\u7a0b\u5e8f\u8fd4\u56de\u503c",e.data),1==e.data.status)console.log("\u63d0\u4ea4\u8df3\u8f6c\u4fe1\u606f\u6210\u529f");else switch(e.data.code){case 1005:console.log("\u63d0\u4ea4\u8df3\u8f6c\u4fe1\u606f\u53c2\u6570\u9519\u8bef")}},error:function(){console.log("\u8fde\u63a5\u9519\u8bef")}})}})})},rotate:function(){var e=cc.delayTime(2),t=cc.rotateBy(.1,-20),a=cc.rotateBy(.2,40),n=cc.rotateBy(.1,-20),o=cc.repeat(cc.sequence(t,a,n),3),i=cc.sequence(e,o),s=cc.repeatForever(i);this.node.runAction(s)}}),cc._RF.pop()},{"../gameConfig":"gameConfig","../utils/util":"util"}],player:[function(e,t,a){"use strict";cc._RF.push(t,"92761P8JflM+LTiWgKZjbFt","player");var n=i(e("./gameConfig")),o=i(e("./GameDataManager"));function i(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{anim:null,jumpHeight:300},onLoad:function(){this.anim=this.node.getComponent(cc.Animation),this.stop(),this.configInit()},onCollisionEnter:function(e){var t=this.game.stage.currentPlat.width,a=this.game.stage.currentPlat.x,n=this.game.stage.nextPlat.width,i=this.game.stage.nextPlat.x;a-t/2<this.node.x&&this.node.x<a+t/2?console.log("\u4f4d\u4e8e\u5f53\u524d\u7ad9\u6869\u8303\u56f4\u5185"):i-n/2<this.node.x&&this.node.x<i+n/2?console.log("\u4f4d\u4e8e\u4e0b\u4e00\u7ad9\u6869\u8303\u56f4\u5185"):(o.default.isSuccess=!1,o.default.isMove=!1,o.default.isGameOver=!0,this.game.showGameOver(),this.node.stopAllActions(),this.game.stick.node.stopAllActions(),this.game.bridge.node.stopAllActions(),this.fall())},configInit:function(){this.node.x=-210,this.node.y=-295},init:function(e){this.game=e},gameInit:function(){this.configInit(),this.stop()},run:function(){o.default.isGameOver||(this.anim.play("playerRun").repeatCount=1/0)},stop:function(){this.anim.play("playerStand").repeatCount=1},drop:function(e){var t=this,a=(e/200).toFixed(1),n=cc.moveTo(a,cc.v2(-210+e,-295)),o=cc.callFunc(function(){t.anim.play("playerFall").repeatCount=1}),i=cc.moveTo(1,cc.v2(-210+e,-1e3)).easing(cc.easeIn(2.5)),s=cc.sequence(n,o,i);this.node.runAction(s)},fall:function(){this.anim.play("playerFall").repeatCount=1;var e=cc.moveTo(1,cc.v2(this.node.x,-1e3)).easing(cc.easeIn(2.5));this.node.runAction(e)},successJump:function(e,t){var a=this;this.anim.play("playerJump");var n=cc.jumpTo(1,cc.v2(-210+e,-295),t,1),i=cc.callFunc(function(){o.default.isSuccess&&(a.stop(),o.default.isMove=!0,a.game.gainScore(),a.game.scoreAni.showScoreFx())}),s=cc.sequence(n,i);this.node.runAction(s)},failJump:function(e,t){var a=this;this.anim.play("playerJump");var n=cc.jumpTo(1,cc.v2(-210+e,-295),t,1),o=cc.callFunc(function(){a.anim.play("playerFall"),a.game.showGameOver()}),i=cc.moveTo(1.5,cc.v2(-210+e,-1e3)).easing(cc.easeIn(2)),s=cc.sequence(n,o,i);this.node.runAction(s)},readyToJump:function(){this.anim.play("playerReadyJump")},update:function(e){2==o.default.toolChoose&&o.default.isSuccess&&o.default.isMove&&(this.node.x-=n.default.gameMoveSpeed)}}),cc._RF.pop()},{"./GameDataManager":"gameDataManager","./gameConfig":"gameConfig"}],rank:[function(e,t,a){"use strict";cc._RF.push(t,"ea993OaclZFSYRp26rCz1XM","rank");var n=c(e("../utils/util")),o=c(e("../utils/GameUITools")),i=c(e("../gameConfig")),s=c(e("../gameDataManager"));function c(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{inviteBtn:cc.Node,closeBtn:cc.Node,btnSound:{default:null,type:cc.AudioClip}},onLoad:function(){this.init(),this.inviteBtn.zIndex=10},init:function(){var e=this;cc.loader.loadRes("panel/subCanvas",function(t,a){if(!t){var n=cc.instantiate(a);e.node.addChild(n,5)}}),i.default.IS_WX&&(this.tex=new cc.Texture2D,window.sharedCanvas.width=750,window.sharedCanvas.height=1206,wx.postMessage({messageType:2,MAIN_MENU_NUM:i.default.MAIN_MENU_NUM})),this.node.on("touchstart",function(e){e.stopPropagation()}),i.default.IS_WX&&(n.default.btnEvent(this.closeBtn,this.btnSound,function(){i.default.IS_WX&&(wx.postMessage({messageType:3,MAIN_MENU_NUM:i.default.MAIN_MENU_NUM}),console.log(s.default.isHideSub),s.default.isHideSub&&(console.log("\u5173\u95ed\u6392\u884c\u699c\u9690\u85cf\u5b50\u57df"),wx.postMessage({messageType:5}))),o.default.unLoadingLayer(e.node)}),n.default.btnEvent(this.inviteBtn,this.btnSound,function(){wx.shareAppMessage({title:i.default.config.shareTitle,imageUrl:i.default.config.shareImg,query:"shareCode="+wx.getStorageSync("shareCode")}),wx.request({url:i.default.INTER_URL+"game/share",data:{title:i.default.config.shareTitle,image:i.default.config.shareImg,query:wx.getStorageSync("shareCode")},header:{"content-type":"application/x-www-form-urlencoded",Cookie:"SESSION="+wx.getStorageSync("sessionId")},method:"POST",success:function(e){if(console.log(e.data),1==e.data.status)console.log("\u6e38\u620f\u5206\u4eab\u4fdd\u5b58\u6210\u529f");else switch(e.data.code){case 1005:console.log("\u6e38\u620f\u5206\u4eab\u4fdd\u5b58\u53c2\u6570\u9519\u8bef")}},error:function(){console.log("\u8fde\u63a5\u9519\u8bef")}})}))},start:function(){this.tex=new cc.Texture2D},_updateSubDomainCanvas:function(){if(this.tex){var e=wx.getOpenDataContext().canvas;this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.subCanvas=new cc.SpriteFrame(this.tex)}},update:function(){i.default.IS_WX&&this._updateSubDomainCanvas()}}),cc._RF.pop()},{"../gameConfig":"gameConfig","../gameDataManager":"gameDataManager","../utils/GameUITools":"GameUITools","../utils/util":"util"}],rule:[function(e,t,a){"use strict";cc._RF.push(t,"d2830UZLJtPYp+FyYc33J4H","rule");var n=i(e("../utils/util")),o=i(e("../utils/GameUITools"));function i(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{rules:cc.Node,ruleCloseBtn:cc.Node,btnSound:{default:null,type:cc.AudioClip}},onLoad:function(){this.init()},init:function(){var e=this;n.default.btnEvent(this.ruleCloseBtn,this.btnSound,function(){o.default.unLoadingLayer(e.node)}),this.node.on("touchstart",function(e){e.stopPropagation()})}}),cc._RF.pop()},{"../utils/GameUITools":"GameUITools","../utils/util":"util"}],scoreAni:[function(e,t,a){"use strict";cc._RF.push(t,"8c32ftISiRC+7K7hY8Ua0mA","scoreAni");var n=i(e("./gameDataManager")),o=i(e("./utils/animation"));function i(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{greenAdd:cc.Node,redAdd:cc.Node,yellowAdd:cc.Node,good:cc.Node,great:cc.Node,prefect:cc.Node},onLoad:function(){this.init()},init:function(){for(var e=this.node.children,t=0;t<e.length;t++)e[t].opacity=0},start:function(){},showScoreFx:function(){switch(n.default.addScoreGrade){case 1:this.redAdd.getComponent(cc.Label).string="+"+n.default.nextScore,o.default.scoreFx(this.good,0,0,0,300,1),o.default.scoreFx(this.redAdd,-210,-100,-210,0,1);break;case 2:this.greenAdd.getComponent(cc.Label).string="+"+n.default.nextScore,o.default.scoreFx(this.great,0,0,0,300,1),o.default.scoreFx(this.greenAdd,-210,-100,-210,0,1);break;case 3:this.yellowAdd.getComponent(cc.Label).string="+"+n.default.nextScore,o.default.scoreFx(this.prefect,0,0,0,300,1),o.default.scoreFx(this.yellowAdd,-210,-100,-210,0,1)}}}),cc._RF.pop()},{"./gameDataManager":"gameDataManager","./utils/animation":"animation"}],shark:[function(e,t,a){"use strict";cc._RF.push(t,"c256aHBc0pEY75NrgcUmjQU","shark");i(e("./utils/util")),i(e("./utils/animation")),i(e("./utils/GameUITools"));var n=i(e("./gameConfig")),o=i(e("./gameDataManager"));function i(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{sharkFin:cc.Node,sharkAni:cc.Node,sharkSwimSpeed:5,ani:null,isSharkSwim:!0,canSharkJump:!0},init:function(e){this.game=e},onLoad:function(){this.ani=this.sharkAni.getComponent(cc.Animation),this.openCollider(),this.configInit(),this.openSharkTimer()},gameInit:function(){this.openSharkTimer()},openCollider:function(){cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDrawBoundingBox=!0},closeCollider:function(){cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDrawBoundingBox=!1},configInit:function(){this.sharkSwimSpeed=5,this.isSharkSwim=!0,this.sharkFin.width=200,this.sharkFin.active=!0,this.sharkAni.active=!1},openSharkTimer:function(){this.schedule(this.sharkJump,n.default.sharkJumpDurTime)},sharkJump:function(){var e=this;if(!o.default.isGameOver){this.ani.setCurrentTime(0),this.ani.play(),this.isSharkSwim=!1,this.sharkFin.active=!1,this.sharkAni.active=!0,this.sharkAni.x=this.sharkFin.x;var t=cc.callFunc(function(){e.openCollider()}),a=cc.moveTo(1,cc.v2(this.sharkAni.x,200)).easing(cc.easeIn(3)),n=cc.callFunc(function(){e.closeCollider()}),i=cc.jumpTo(.8,cc.v2(this.sharkAni.x-400,200),100,1),s=cc.moveTo(1,cc.v2(this.sharkAni.x-400,-500)),c=cc.callFunc(function(){e.configInit(),e.sharkFin.x=e.sharkAni.x}),r=cc.sequence(t,a,n,i,s,c);this.sharkAni.runAction(r)}o.default.isGameOver&&this.unschedule(this.sharkJump)},start:function(){},update:function(e){this.isSharkSwim&&(this.sharkFin.x-=this.sharkSwimSpeed,this.sharkFin.x<-500&&(this.sharkFin.x=500))}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager","./utils/GameUITools":"GameUITools","./utils/animation":"animation","./utils/util":"util"}],stage:[function(e,t,a){"use strict";cc._RF.push(t,"d8730dAQ/NFJ4QaRBKUkkcH","stage");var n=s(e("./gameConfig")),o=s(e("./gameDataManager")),i=s(e("./utils/util"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{stagePrefabs:[cc.Prefab],stagePools:[],doneStage:0,canRecycle:!1,currentPlat:{default:null,type:cc.node},nextPlat:{default:null,type:cc.node},nextTwoPlat:{default:null,type:cc.node},currentPosX:0,nextPosX:0,nextTwoPosX:0},onLoad:function(){var e=this;this.configInit(),this.stagePoolInit(function(){e.stageInit()})},init:function(e){this.game=e},configInit:function(){this.node.opacity=255,this.canRecycle=!1,this.doneStage=0},gameInit:function(){this.destroyAll(),this.configInit(),this.stageInit()},stagePoolInit:function(e){for(var t=0;t<this.stagePrefabs.length;t++){var a=new cc.NodePool;this.stagePools.push(a),5==t&&e&&e()}},stageInit:function(){var e,t;switch(this.currentPlat=this.getStage(i.default.randomNum(3)),this.currentPlat.setPosition(cc.v2(-230,-295)),this.currentPlat.parent=this.node,this.currentPosX=-230,this.nextPlat=this.getStage(i.default.randomNum(3)),t=i.default.randomNum(250)+100+(this.currentPlat.width/2+this.nextPlat.width/2),t-=t%n.default.gameMoveSpeed,e=this.currentPlat.x+t,this.nextPlat.setPosition(cc.v2(e,-295)),this.nextPlat.parent=this.node,this.nextPosX=e,this.nextTwoPlat=this.getStage(i.default.randomNum(3)),t=i.default.randomNum(250)+100+(this.nextPlat.width/2+this.nextTwoPlat.width/2),t-=t%n.default.gameMoveSpeed,e=this.nextPlat.x+t,this.nextTwoPlat.setPosition(cc.v2(e,-295)),this.nextTwoPlat.parent=this.node,this.nextTwoPosX=e,o.default.toolChoose){case 0:this.game.stick.node.active=1,this.game.stick.setStick(this.currentPlat.x+this.currentPlat.width/2),console.log(this.game.stick.node);break;case 1:this.game.bridge.node.active=!0,this.game.bridge.setBridge(this.currentPlat.x+this.currentPlat.width/2);break;case 2:this.game.energy.showCali(),this.game.energy.setCali()}},createStage:function(){this.doneStage+=1;var e=i.default.randomNum(100),t=100-Math.floor(this.doneStage/2)-100*n.default.minMultiProbability;t<100*(1-n.default.maxMultiProbability)&&(t=100*(1-n.default.maxMultiProbability));var a=i.default.randomNum(3);e<t?this.setNextStage(a):1==o.default.toolChoose?this.setNextStage(a+2):this.setNextStage(a+3)},setNextStage:function(e){var t,a,s;this.currentPlat=this.nextPlat,this.nextPlat=this.nextTwoPlat,t=this.getStage(e),this.nextTwoPlat=t,this.nextTwoPlat.parent=this.node,this.nextTwoPlat.opacity=0,s=i.default.randomNum(250)+100+(this.nextPlat.width/2+this.nextTwoPlat.width/2),s-=s%n.default.gameMoveSpeed,a=this.nextPlat.x+s,this.nextTwoPlat.setPosition(cc.v2(a,-605)),this.currentPosX=this.currentPlat.x,this.nextPosX=this.nextPlat.x,this.nextTwoPosX=this.nextTwoPlat.x;var c=cc.moveTo(1,cc.v2(a,-295)),r=cc.fadeIn(1),u=cc.spawn(c,r);this.nextTwoPlat.runAction(u),2!==o.default.toolChoose&&this.doneStage%5==0&&this.game.fog.showFog(this.nextPlat.x,-305),2==o.default.toolChoose&&this.game.energy.setCali()},recycleStage:function(){var e=this.node.children[0],t=parseInt(e.name.replace(/[^0-9]/gi,""));this.stagePools[t-1].put(e)},destroyAll:function(){this.node.removeAllChildren(!0)},getLength:function(){var e=new Object,t=Math.floor(this.nextPlat.x-this.currentPlat.x-(this.nextPlat.width+this.currentPlat.width)/2),a=Math.floor(this.nextPlat.x-this.currentPlat.x+(this.nextPlat.width-this.currentPlat.width)/2);return e.min=t,e.max=a,e},hideStage:function(){this.node.opacity=0},showStage:function(){this.node.opacity=255},setStagePosX:function(){this.currentPlat.setPosition(cc.v2(this.currentPosX,-295)),this.nextPlat.setPosition(cc.v2(this.nextPosX,-295)),this.nextTwoPlat.setPosition(cc.v2(this.nextTwoPosX,-295))},getStage:function(e){return this.stagePools[e].size()>0?this.stagePools[e].get():cc.instantiate(this.stagePrefabs[e])},update:function(e){if(o.default.isMove)for(var t=this.node.children,a=0;a<t.length;a++)t[a].x-=n.default.gameMoveSpeed}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager","./utils/util":"util"}],start:[function(e,t,a){"use strict";cc._RF.push(t,"4a781FRknlLP6t2uRma8nOy","start");var n=c(e("./utils/util")),o=c(e("./utils/GameUITools")),i=c(e("./gameDataManager")),s=c(e("./gameConfig"));function c(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{startBtn:cc.Node,ruleBtn:cc.Node,rankBtn:cc.Node,modeChooseBtn:cc.Node,prefab:[cc.Prefab],btnSound:{default:null,type:cc.AudioClip}},onLoad:function(){this.init(),s.default.IS_WX&&(wx.showShareMenu(),this.getShareConfig(),this.getUserSystemInfo(),this.getOtherShareCode())},start:function(){cc.director.preloadScene("game",function(){console.log("\u6e38\u620f\u573a\u666f\u5df2\u52a0\u8f7d")}),this.tex=new cc.Texture2D,this.modeBounce(this.startBtn)},init:function(){s.default.IS_WX&&o.default.initPrefab(this.prefab[1]),o.default.initPrefab(this.prefab[0]),o.default.initPrefab(this.prefab[2]),n.default.btnEvent(this.startBtn,this.btnSound,function(){o.default.loadingScene("game")}),n.default.btnEvent(this.ruleBtn,this.btnSound,function(){o.default.loadingLayer("panel/rule")}),n.default.btnEvent(this.rankBtn,this.btnSound,function(){o.default.loadingLayer("panel/rank")}),n.default.btnEvent(this.modeChooseBtn,this.btnSound,function(){o.default.loadingLayer("panel/modeChoose")})},getShareConfig:function(){wx.request({url:s.default.INTER_URL+"game/getConfig",method:"GET",success:function(e){if(console.log("\u83b7\u53d6\u5206\u4eab\u4fe1\u606f\u8fd4\u56de\u503c\uff1a",e.data),1==e.data.status){s.default.config=e.data.data,s.default.haveSetMode||(i.default.toolChoose=parseInt(e.data.data.defaultModel)-1,s.default.haveSetMode=!0);var t=parseInt(s.default.config.difficulty);n.default.setGameDifficulty(t),wx.onShareAppMessage(function(e){return{title:s.default.config.shareTitle,imageUrl:s.default.config.shareImg,query:"shareCode="+wx.getStorageSync("shareCode")}})}else n.default.gameLog(e.data.info)}})},getUserSystemInfo:function(){wx.getSystemInfo({success:function(e){s.default.systemInfo.system=e.system,s.default.systemInfo.brand=e.brand,s.default.systemInfo.model=e.model,s.default.systemInfo.pixelRatio=e.pixelRatio,s.default.systemInfo.screenWidth=e.screenWidth,s.default.systemInfo.screenHeight=e.screenHeight,s.default.systemInfo.version=e.version,s.default.systemInfo.platform=e.platform,s.default.systemInfo.SDKVersion=e.SDKVersion,s.default.systemInfo.screenWidth=e.screenWidth,s.default.systemInfo.benchmarkLevel=e.benchmarkLevel}})},getOtherShareCode:function(){var e=wx.getLaunchOptionsSync();console.log("\u8fd4\u56de\u5c0f\u7a0b\u5e8f\u542f\u52a8\u53c2\u6570",e),e.query.shareCode&&(s.default.enterShareConfig.enterShareCode=e.query.shareCode,s.default.enterShareConfig.path=e.path)},modeBounce:function(e){var t=cc.scaleTo(.5,.9),a=cc.scaleTo(.5,1),n=cc.sequence(t,a),o=cc.repeatForever(n);e.runAction(o)}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager","./utils/GameUITools":"GameUITools","./utils/util":"util"}],stick:[function(e,t,a){"use strict";cc._RF.push(t,"fb940PcZihLlKcGU29ECPir","stick");var n=i(e("./gameConfig")),o=i(e("./gameDataManager"));function i(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{stickLength:70,canLengthen:!1,startLengthen:!1},onLoad:function(){this.configInit()},init:function(){this.node.active=!1},configInit:function(){this.node.height=n.default.stickLength,this.node.rotation=0},gameInit:function(){this.node.opacity=255,this.node.height=n.default.stickLength,this.node.rotation=0},lengthen:function(e){e&&(this.node.height+=n.default.stickLengthSpeed)},setStick:function(e){this.node.active=!0,this.node.setPosition(cc.v2(e,-305)),this.configInit()},update:function(e){this.lengthen(o.default.isLengthen),o.default.isMove&&(this.node.x-=n.default.gameMoveSpeed)}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager"}],subCanvas:[function(e,t,a){"use strict";cc._RF.push(t,"9ea6cviF05Jj5GuSllDVB1D","subCanvas");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../gameConfig"));cc.Class({extends:cc.Component,properties:{},onload:function(){this.init()},init:function(){n.default.IS_WX&&(this.tex=new cc.Texture2D,window.sharedCanvas.width=750,window.sharedCanvas.height=1206)},start:function(){this.tex=new cc.Texture2D},_updateSubDomainCanvas:function(){if(this.tex){var e=wx.getOpenDataContext().canvas;this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.node=new cc.SpriteFrame(this.tex)}},update:function(){n.default.IS_WX&&this._updateSubDomainCanvas()}}),cc._RF.pop()},{"../gameConfig":"gameConfig"}],userInfo:[function(e,t,a){"use strict";cc._RF.push(t,"cbf0bCBr4ZKN7+pR1Gx5PMo","userInfo");var n=i(e("../gameConfig")),o=i(e("../utils/util"));function i(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{nickName:cc.Label,avatar:cc.Sprite},onLoad:function(){this.node.active=!1;try{this.login()}catch(e){o.default.gameLog("\u7528\u6237\u6388\u6743\u6a21\u5757\u9519\u8bef")}},unLoginedSetting:function(){var e=this;0==n.default.IS_AUTHORIZE?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?(console.log("==\u5df2\u83b7\u5f97\u767b\u5f55\u6743\u9650=="),e.node.active=!0,n.default.IS_AUTHORIZE=!0,e.loginWithWxAuthorize(),wx.getUserInfo({success:function(t){n.default.userInfo.nickName=t.userInfo.nickName,n.default.userInfo.avatarUrl=t.userInfo.avatarUrl+"?aaa=aa.jpg",e.nickName.string=t.userInfo.nickName,cc.loader.load(n.default.userInfo.avatarUrl,function(t,a){var n=new cc.SpriteFrame(a);e.avatar.spriteFrame=n})}})):(e.loginWithoutWxAuthorize(),wx.getSystemInfo({success:function(t){var a=t.screenWidth,o=t.screenHeight;console.log(a,o),null==n.default.auths_Btn&&(n.default.auths_Btn=wx.createUserInfoButton({type:"image",image:"https://st.gwold.com/wfclb/ninja/pic/authorBtn.png",style:{left:a/2-30-Math.floor(250*a/750),top:o/2-30-Math.floor(500*o/1206),width:60,height:60}}),n.default.auths_Btn.onTap(function(t){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?(console.log("==\u5df2\u7ecf\u6388\u6743==="),n.default.IS_AUTHORIZE=!0,n.default.auths_Btn.hide(),cc.director.getScene().children[0].getChildByName("userInfo").active=!0,e.sendUserInfo()):console.log("==\u62d2\u7edd\u6388\u6743===")}})}),n.default.auths_Btn.show())}}))},fail:function(){o.default.gameLog("wx.getSetting\u8c03\u7528\u5931\u8d25")}}):(console.log("\u5f53\u524d\u5df2\u624b\u52a8\u6388\u6743"),this.node.active=!0,n.default.auths_Btn&&n.default.auths_Btn.hide(),this.nickName.string=n.default.userInfo.nickName,cc.loader.load(n.default.userInfo.avatarUrl,function(t,a){var n=new cc.SpriteFrame(a);e.avatar.spriteFrame=n}))},loginedSetting:function(){var e=this;0==n.default.IS_AUTHORIZE?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?(console.log("==\u5df2\u83b7\u5f97\u767b\u5f55\u6743\u9650=="),e.node.active=!0,n.default.IS_AUTHORIZE=!0,wx.getUserInfo({success:function(t){n.default.userInfo.nickName=t.userInfo.nickName,n.default.userInfo.avatarUrl=t.userInfo.avatarUrl+"?aaa=aa.jpg",e.nickName.string=t.userInfo.nickName,cc.loader.load(n.default.userInfo.avatarUrl,function(t,a){var n=new cc.SpriteFrame(a);e.avatar.spriteFrame=n})}})):wx.getSystemInfo({success:function(t){var a=t.screenWidth,o=t.screenHeight;console.log(a,o),null==n.default.auths_Btn&&(n.default.auths_Btn=wx.createUserInfoButton({type:"image",image:"https://st.gwold.com/wfclb/ninja/pic/authorBtn.png",style:{left:a/2-30-Math.floor(250*a/750),top:o/2-30-Math.floor(500*o/1206),width:60,height:60}}),n.default.auths_Btn.onTap(function(t){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?(console.log("==\u5df2\u7ecf\u6388\u6743==="),n.default.IS_AUTHORIZE=!0,n.default.auths_Btn.hide(),cc.director.getScene().children[0].getChildByName("userInfo").active=!0,e.sendUserInfo()):console.log("==\u62d2\u7edd\u6388\u6743===")}})}),n.default.auths_Btn.show())}})},fail:function(){o.default.gameLog("wx.getSetting\u8c03\u7528\u5931\u8d25")}}):(console.log("\u5f53\u524d\u5df2\u624b\u52a8\u6388\u6743"),this.node.active=!0,n.default.auths_Btn&&n.default.auths_Btn.hide(),this.nickName.string=n.default.userInfo.nickName,cc.loader.load(n.default.userInfo.avatarUrl,function(t,a){var n=new cc.SpriteFrame(a);e.avatar.spriteFrame=n}))},loginWithWxAuthorize:function(){console.log("\u5df2\u6388\u6743\u767b\u9646\u5f00\u59cb");this.getUserInfo(function(){wx.request({url:n.default.INTER_URL+"login",data:{code:n.default.userInfo.code,nickName:n.default.userInfo.nickName,headImg:n.default.userInfo.avatarUrl,country:n.default.userInfo.country,province:n.default.userInfo.province,city:n.default.userInfo.city,sex:n.default.userInfo.sex,shareCode:n.default.enterShareConfig.enterShareCode},method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){if(console.log("\u767b\u9646\u5b8c\u6210\u540e\u8fd4\u56de\u503c\uff1a",e.data),1==e.data.status)wx.setStorageSync("sessionId",e.data.data.sessionId),wx.setStorageSync("shareCode",e.data.data.shareCode);else switch(e.data.code){case 1006:o.default.gameLog("\u767b\u5f55\u64cd\u4f5c\u5931\u8d25");break;case 1005:o.default.gameLog("\u767b\u5f55\u53c2\u6570\u9519\u8bef")}},error:function(){o.default.gameLog("/login\u63a5\u53e3\u8c03\u7528\u5931\u8d25")}})})},loginWithoutWxAuthorize:function(){console.log("\u672a\u6388\u6743\u767b\u9646\u5f00\u59cb");wx.request({url:n.default.INTER_URL+"login",data:{code:n.default.userInfo.code,shareCode:n.default.enterShareConfig.enterShareCode},method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){console.log("\u5fae\u4fe1\u672a\u6388\u6743\u767b\u9646\u5b8c\u6210\u540e\u8fd4\u56de\u503c\uff1a",e.data),1==e.data.status?(wx.setStorageSync("sessionId",e.data.data.sessionId),wx.setStorageSync("shareCode",e.data.data.shareCode)):o.default.gameLog(e.data.info)},error:function(){o.default.gameLog("/login\u63a5\u53e3\u8c03\u7528\u5931\u8d25")}})},sendUserInfo:function(){console.log("\u5c06\u7528\u6237\u4fe1\u606f\u4f20\u9001\u81f3\u5f00\u53d1\u8005\u670d\u52a1\u5668\u5f00\u59cb");var e=cc.director.getScene().children[0].getChildByName("userInfo"),t=e.getChildByName("nickName").getComponent(cc.Label),a=e.getChildByName("mask").getChildByName("avatar").getComponent(cc.Sprite);this.getUserInfo(function(){t.string=n.default.userInfo.nickName,cc.loader.load(n.default.userInfo.avatarUrl,function(e,t){var n=new cc.SpriteFrame(t);a.spriteFrame=n}),wx.request({url:n.default.INTER_URL+"info",data:{nickName:n.default.userInfo.nickName,headImg:n.default.userInfo.avatarUrl,country:n.default.userInfo.country,province:n.default.userInfo.province,city:n.default.userInfo.city,sex:n.default.userInfo.sex},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",Cookie:"SESSION="+wx.getStorageSync("sessionId")},success:function(e){console.log("\u7528\u6237\u4fe1\u606f\u4f20\u81f3\u5f00\u53d1\u8005\u670d\u52a1\u5668\u8fd4\u56de\u503c",e.data),1==e.data.status||o.default.gameLog(e.data.info)},error:function(){o.default.gameLog("/info\u63a5\u53e3\u8c03\u7528\u5931\u8d25")}})})},getUserInfo:function(e){console.log("\u83b7\u53d6\u4e2a\u4eba\u4fe1\u606f\u5f00\u59cb");var t=e;wx.getUserInfo({success:function(e){console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u8fd4\u56de\u503c",e),n.default.userInfo.nickName=e.userInfo.nickName,n.default.userInfo.avatarUrl=e.userInfo.avatarUrl+"?aaa=aa.jpg",n.default.userInfo.country=e.userInfo.country,n.default.userInfo.province=e.userInfo.province,n.default.userInfo.city=e.userInfo.city,n.default.userInfo.sex=e.userInfo.gender,(e.userInfo.gender="")&&(n.default.userInfo.sex=-1),console.log(n.default),t&&t()}})},checkLogin:function(e){wx.request({url:n.default.INTER_URL+"checkLogin",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log("\u68c0\u67e5\u767b\u9646\u8fd4\u56de\u503c\uff1a",t.data.data),1==t.data.data?console.log("\u60a8\u5df2\u767b\u9646\uff0c\u65e0\u987b\u518d\u767b\u9646"):0==t.data.data&&e&&e()},fail:function(){o.default.gameLog("checkLogin\u63a5\u53e3\u8c03\u7528\u5931\u8d25")}})},login:function(){var e=this;n.default.haveCheckLogin?this.loginedSetting():wx.checkSession({success:function(){console.log("session_key\u672a\u8fc7\u671f"),wx.request({url:n.default.INTER_URL+"checkLogin",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log(t.data),n.default.haveCheckLogin=!0,1==t.data.status&&1==t.data.data?(console.log("\u5df2\u767b\u9646"),e.loginedSetting()):1==t.data.status&&0==t.data.data&&(console.log("\u672a\u767b\u9646"),wx.login({success:function(t){n.default.userInfo.code=t.code,e.unLoginedSetting()}}))},fail:function(){o.default.gameLog("checkLogin\u63a5\u53e3\u8c03\u7528\u5931\u8d25")}})},fail:function(){console.log("session_key\u5df2\u8fc7\u671f"),wx.login({success:function(t){n.default.userInfo.code=t.code,n.default.haveCheckLogin=!0,e.unLoginedSetting()}})}})}}),cc._RF.pop()},{"../gameConfig":"gameConfig","../utils/util":"util"}],util:[function(e,t,a){"use strict";cc._RF.push(t,"21692qGB49Md4FD07gHVTu1","util"),Object.defineProperty(a,"__esModule",{value:!0});var n=i(e("../gameDataManager")),o=i(e("../gameConfig"));function i(e){return e&&e.__esModule?e:{default:e}}var s={btnEvent:function(e,t,a){e.on("touchstart",function(){e.setScale(.8),n.default.canSoundPlay&&cc.audioEngine.playEffect(t,!1,1)}),e.on("touchend",function(){e.setScale(1),a&&a()}),e.on("touchcancel",function(){e.setScale(1),a&&a()})},modeBtnEvent:function(e,t,a){e.on("touchstart",function(){n.default.canSoundPlay&&cc.audioEngine.playEffect(t,!1,1)}),e.on("touchend",function(){a&&a()})},gameStartDataInit:function(){n.default.totalScore=0,n.default.isMove=!1,n.default.isSuccess=!1,n.default.canDrop=!1,n.default.move=0,n.default.isAnimate=!1,n.default.isLengthen=!1,n.default.isStartLengthen=!1,n.default.isGameOver=!1,n.default.isHideSub=!1},gameContinueDataInit:function(){n.default.isMove=!1,n.default.isSuccess=!1,n.default.canDrop=!1,n.default.move=0,n.default.isAnimate=!1,n.default.isLengthen=!1,n.default.isStartLengthen=!1,n.default.isGameOver=!1,n.default.isHideSub=!1},randomNum:function(e){return Math.floor(Math.random()*e)},setGameDifficulty:function(e){o.default.MaxMultiProbability=.13+.7*e,o.default.sharkJumpDurTime=40-3*e},gameLog:function(e){var t=e;wx.request({url:o.default.LOG_URL+"submit",data:{code:2,env:o.default.env,content:t,system:o.default.systemInfo.system,brand:o.default.systemInfo.brand,model:o.default.systemInfo.model,pixelRatio:o.default.systemInfo.pixelRatio,screenWidth:o.default.systemInfo.screenWidth,screenHeight:o.default.systemInfo.screenHeight,version:o.default.systemInfo.version,platform:o.default.systemInfo.platform,sdkVersion:o.default.systemInfo.sdkVersion,benchmarkLevel:o.default.systemInfo.benchmarkLevel},header:{"content-type":"application/x-www-form-urlencoded",sessionId:"SESSION="+wx.getStorageSync("sessionId")},method:"POST",seccuss:function(e){e.data.status?console.log("\u65e5\u5fd7\u63d0\u4ea4\u6210\u529f"):console.log(e.data.info)}})},culculateScore:function(e,t,a){var o,i=parseInt(e.name.replace(/[^0-9]/gi,"")),s=Math.floor(Math.abs(t-(a+e.width/2)));if(i<=3)o=Math.floor(e.width/9),0<=s&&s<=.5*o?(n.default.nextScore=5,n.default.addScoreGrade=3):.5*o<s&&s<=1.5*o?(n.default.nextScore=4,n.default.addScoreGrade=2):1.5*o<s&&s<=2.5*o?(n.default.nextScore=3,n.default.addScoreGrade=2):2.5*o<s&&s<=3.5*o?(n.default.nextScore=2,n.default.addScoreGrade=1):3.5*o<s&&s<=4.5*o&&(n.default.nextScore=1,n.default.addScoreGrade=1);else switch(i){case 4:o=Math.floor(e.width/7),0<s&&s<=.5*o?(n.default.nextScore=6,n.default.addScoreGrade=3):.5*o<s&&s<=1.5*o?(n.default.nextScore=5,n.default.addScoreGrade=2):1.5*o<s&&s<=2.5*o?(n.default.nextScore=3,n.default.addScoreGrade=2):2.5*o<s&&s<=3.5*o&&(n.default.nextScore=1,n.default.addScoreGrade=1);break;case 5:o=Math.floor(e.width/5),0<s&&s<=.5*o?(n.default.nextScore=7,n.default.addScoreGrade=3):.5*o<s&&s<=1.5*o?(n.default.nextScore=4,n.default.addScoreGrade=2):1.5*o<s&&s<=2.5*o&&(n.default.nextScore=2,n.default.addScoreGrade=1);break;case 6:o=Math.floor(e.width/3),0<s&&s<=.5*o?(n.default.nextScore=8,n.default.addScoreGrade=3):.5*o<s&&s<=1.5*o&&(n.default.nextScore=4,n.default.addScoreGrade=2)}}};a.default=s,t.exports=a.default,cc._RF.pop()},{"../gameConfig":"gameConfig","../gameDataManager":"gameDataManager"}]},{},["GameOver","bridge","energy","fog","game","gameBg","gameConfig","gameDataManager","guide","media","modeChoose","moreGame","rank","rule","subCanvas","userInfo","player","scoreAni","shark","stage","start","stick","GameUITools","animation","util"]);