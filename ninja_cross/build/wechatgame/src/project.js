window.__require=function e(t,a,n){function i(s,c){if(!a[s]){if(!t[s]){var u=s.split("/");if(u=u[u.length-1],!t[u]){var r="function"==typeof __require&&__require;if(!c&&r)return r(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+s+"'")}}var l=a[s]={exports:{}};t[s][0].call(l.exports,function(e){return i(t[s][1][e]||e)},l,l.exports,e,t,a,n)}return a[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({GameOver:[function(e,t,a){"use strict";cc._RF.push(t,"fd43bXqTxNI1qhSd3lYvTSr","GameOver");var n=c(e("./utils/util")),i=c(e("./utils/GameUITools")),o=c(e("./gameConfig")),s=c(e("./GameDataManager"));function c(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{playAgainBtn:cc.Node,advBtn:cc.Node,goBackHomeBtn:cc.Node,rankBtn:cc.Node,btnSound:cc.AudioClip,bestScore:cc.Label,nowScore:cc.Label,btnGroup:cc.Node,showOffbtn:cc.Node},onLoad:function(){var e=this;cc.loader.loadRes("panel/subCanvas",function(t,a){if(!t){var n=cc.instantiate(a);e.node.addChild(n)}}),n.default.btnEvent(this.playAgainBtn,this.btnSound,function(){o.default.canResurrectTime=1,e.advBtn.active=!0,e.game.reStartGame(),e.node.active=!1}),n.default.btnEvent(this.goBackHomeBtn,this.btnSound,function(){i.default.loadingScene("start"),o.default.canResurrectTime=1}),n.default.btnEvent(this.rankBtn,this.btnSound,function(){i.default.loadingLayer("panel/rank")}),n.default.btnEvent(this.advBtn,this.btnSound,function(){o.default.canResurrectTime-=1,e.game.continueGame(),e.node.active=!1}),n.default.btnEvent(this.showOffbtn,this.btnSound,function(){if(o.default.IS_WX)switch(s.default.toolChoose){case 0:wx.shareAppMessage({title:"@\u4f60,\u5feb\u6765\u8d85\u8d8a\u6211\u5427",imageUrl:"https://st.gwold.com/wfclb/ninja/pic/stickmode.png"});break;case 1:wx.shareAppMessage({title:"@\u4f60,\u5feb\u6765\u8d85\u8d8a\u6211\u5427",imageUrl:"https://st.gwold.com/wfclb/ninja/pic/bridgemode.png"});break;case 2:wx.shareAppMessage({title:"@\u4f60,\u5feb\u6765\u8d85\u8d8a\u6211\u5427",imageUrl:"https://st.gwold.com/wfclb/ninja/pic/jumpmode.jpg"})}})},init:function(e){this.game=e},showScore:function(){if(localStorage.getItem("score")){var e=localStorage.getItem("score");this.nowScore.string="\u672c\u6b21\u5206\u503c: "+s.default.totalScore,s.default.totalScore>e?(this.bestScore.string="\u5386\u53f2\u6700\u4f73: "+e,localStorage.setItem("score",s.default.totalScore)):this.bestScore.string="\u5386\u53f2\u6700\u4f73: "+e}else this.nowScore.string="\u672c\u6b21\u5206\u503c: "+s.default.totalScore,this.bestScore.string="\u5386\u53f2\u6700\u4f73: "+s.default.totalScore,localStorage.setItem("score",s.default.totalScore);var t=s.default.totalScore;o.default.IS_WX&&wx.postMessage({messageType:1,score:t,MAIN_MENU_NUM:o.default.MAIN_MENU_NUM}),o.default.IS_WX&&wx.postMessage({messageType:3,MAIN_MENU_NUM:o.default.MAIN_MENU_NUM})}}),cc._RF.pop()},{"./GameDataManager":"gameDataManager","./gameConfig":"gameConfig","./utils/GameUITools":"GameUITools","./utils/util":"util"}],GameUITools:[function(e,t,a){"use strict";cc._RF.push(t,"965b9tfL3BFaJsoNPKIlaNl","GameUITools"),Object.defineProperty(a,"__esModule",{value:!0});(function(e){e&&e.__esModule})(e("../gameDatamanager"));var n={loadingScene:function(e){cc.director.preloadScene(e,function(){cc.director.loadScene(e)})},loadingLayer:function(e){cc.loader.loadRes(e,function(e,t){if(!e){var a=cc.instantiate(t);cc.director.getScene().children[0].addChild(a)}})},unLoadingLayer:function(e){cc.director.getScene().children[0].removeChild(e)}};a.default=n,t.exports=a.default,cc._RF.pop()},{"../gameDatamanager":"gameDataManager"}],animation:[function(e,t,a){"use strict";cc._RF.push(t,"34b5eoz/UhOp4hyKtM4ktBT","animation"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../gameDataManager"));var i={toolRotateAni:function(e,t,a){if(e){var i=cc.rotateBy(.7,90).easing(cc.easeIn(1)),o=cc.callFunc(function(){n.default.isMove=!0}),s=cc.sequence(i,o);t.runAction(s)}else{var c=cc.delayTime(.7),u=(i=cc.rotateBy(1.4,180).easing(cc.easeIn(1)),cc.moveTo(2,cc.v2(t.x,-1e4)).easing(cc.easeIn(2.5))),r=(o=cc.callFunc(function(){n.default.canDrop=!0}),cc.sequence(c,o,u));s=cc.spawn(i,r);t.runAction(s)}},scoreFx:function(e,t,a,n,i,o){e.setPosition(cc.v2(t,a)),e.opacity=255;var s=cc.fadeOut(o),c=cc.moveTo(o,cc.v2(n,i)),u=cc.spawn(s,c);e.runAction(u)}};a.default=i,t.exports=a.default,cc._RF.pop()},{"../gameDataManager":"gameDataManager"}],bridge:[function(e,t,a){"use strict";cc._RF.push(t,"ab2925nPNhKQ7LzANX24OIQ","bridge");var n=o(e("./gameConfig")),i=o(e("./gameDataManager"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{bridgeY:90,timer:0},onLoad:function(){this.node.active=!1},start:function(){},configInit:function(){this.node.rotation=0},gameInit:function(){this.node.rotation=0,this.node.opacity=255},buildBridge:function(){var e=this;cc.loader.loadRes("tools/bridgeUnit",function(t,a){if(!t){var n=cc.instantiate(a);n.setPosition(cc.v2(-25,e.bridgeY)),e.node.addChild(n),e.bridgeY+=90}})},reSetBridge:function(){var e=this;this.timer=0,this.bridgeY=90,this.node.removeAllChildren(!0),cc.loader.loadRes("tools/bridgeUnit",function(t,a){if(!t){var n=cc.instantiate(a);n.setPosition(cc.v2(-25,0)),e.node.addChild(n)}})},setBridge:function(e){this.reSetBridge(),this.node.setPosition(cc.v2(e,-305)),this.configInit()},update:function(e){i.default.isGameOver||(i.default.isLengthen&&(this.timer++,this.timer%30==0&&this.buildBridge()),i.default.isMove&&(this.node.x-=n.default.gameMoveSpeed))}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager"}],energy:[function(e,t,a){"use strict";cc._RF.push(t,"c43999w48VE4btSEyWz28vL","energy");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./gameDataManager"));cc.Class({extends:cc.Component,properties:{energy:cc.Node,caliUp:cc.Node,caliDown:cc.Node,energySpeed:5},onLoad:function(){this.hideCali()},init:function(e){this.game=e},configInit:function(){this.energy.height=0,this.energySpeed=5,this.node.opacity=255},gameInit:function(){this.energy.height=0,this.energySpeed=5,this.node.opacity=255,this.setCali()},setCali:function(){var e=this.game.stage.getLength(),t=Math.floor(e.min/600*300),a=Math.floor(e.max/600*300);this.caliUp.y=-147+a,this.caliDown.y=-147+t},showCali:function(){this.node.active=!0},hideCali:function(){this.node.active=!1},update:function(){2==n.default.toolChoose&&n.default.isLengthen&&(this.energy.height+=this.energySpeed,300!=this.energy.height&&0!=this.energy.height||(this.energySpeed*=-1))}}),cc._RF.pop()},{"./gameDataManager":"gameDataManager"}],fog:[function(e,t,a){"use strict";cc._RF.push(t,"e7e49tNaqVEI746VGh7yTu0","fog");var n=o(e("./gameConfig")),i=o(e("./gameDataManager"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.node.opacity=0},showFog:function(e,t){this.node.opacity=0,this.node.setPosition(cc.v2(e,t));var a=cc.fadeIn(.5);this.node.runAction(a),i.default.isShowFog=!0},hideFog:function(){var e=cc.fadeOut(1);this.node.runAction(e),this.node.opacity=0,i.default.isShowFog=!1},update:function(e){i.default.isMove&&(this.node.x-=n.default.gameMoveSpeed)}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager"}],gameBg:[function(e,t,a){"use strict";cc._RF.push(t,"3e816A1145CLLmyJsAk6IJD","gameBg");var n=o(e("./gameConfig")),i=o(e("./gameDataManager"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{far_bg:[cc.Node]},onLoad:function(){},start:function(){},init:function(e){this.game=e},bgMove:function(e,t){for(var a=0;a<e.length;a++){e[a].x-=t}},checkBgReset:function(e){if(e[0].getBoundingBox().xMax<=-375){var t=e.shift();e.push(t);e[0];t.x=1625}},update:function(e){i.default.isMove&&(this.bgMove(this.far_bg,n.default.gameBgMoveSpeed),this.checkBgReset(this.far_bg))}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager"}],gameConfig:[function(e,t,a){"use strict";cc._RF.push(t,"bae414A/XVASpQcak5z2DC3","gameConfig"),Object.defineProperty(a,"__esModule",{value:!0});a.default={isBgmPlay:!0,isScreemCanTouch:!0,gameBgMoveSpeed:1,gameMoveSpeed:8,stickLength:0,stickLengthSpeed:5,minMultiProbability:.2,MaxMultiProbability:.5,canResurrectTime:1,sharkJumpDurTime:30,MAIN_MENU_NUM:"ninja_crossing",IS_WX:!0,nickName:null,avatarUrl:null},t.exports=a.default,cc._RF.pop()},{}],gameDataManager:[function(e,t,a){"use strict";cc._RF.push(t,"4f8f5gTdfJOlIY0uP1DWkdf","gameDataManager"),Object.defineProperty(a,"__esModule",{value:!0});a.default={totalScore:0,nextScore:0,addScoreGrade:1,isMove:!1,isSuccess:!1,canDrop:!1,move:0,moveDistance:0,isAnimate:!1,isShowFog:!1,isGameOver:!1,isLengthen:!1,isStartLengthen:!1,toolChoose:0},t.exports=a.default,cc._RF.pop()},{}],game:[function(e,t,a){"use strict";cc._RF.push(t,"1df98/AWT1MP7cbPP0zZBMT","game");var n=u(e("./utils/util")),i=u(e("./utils/animation")),o=u(e("./utils/GameUITools")),s=u(e("./gameConfig")),c=u(e("./gameDataManager"));function u(e){return e&&e.__esModule?e:{default:e}}var r=e("player"),l=e("stage"),d=e("gameBg"),h=e("stick"),f=e("GameOver"),g=e("scoreAni"),m=e("bridge"),p=e("fog"),v=e("energy"),S=e("shark");cc.Class({extends:cc.Component,properties:{player:r,stage:l,gameBg:d,stick:h,bridge:m,fog:p,gameOver:f,scoreAni:g,energy:v,scoreDisplay:cc.Label,scoreGroup:cc.Node,gameOverSound:cc.AudioClip,shark:S},onLoad:function(){this.gameBg.init(this),this.stage.init(this),this.gameOver.init(this),this.energy.init(this),this.shark.init(this),this.player.init(this),n.default.gameStartDataInit(),this.init(),this.configInit(),this.node.opacity=0,this.node.runAction(cc.fadeIn(.5))},init:function(){var e=this;o.default.loadingLayer("panel/music"),s.default.IS_WX&&o.default.loadingLayer("panel/userInfo"),this.node.on("touchstart",function(){s.default.isScreemCanTouch&&!c.default.isAnimate&&e.gameTouchStartProcessing()}),this.node.on("touchend",function(){s.default.isScreemCanTouch&&c.default.isStartLengthen&&e.gameTouchEndProcessing()})},configInit:function(){this.canShowGameOver=!0},continueGame:function(){switch(this.stage.showStage(),c.default.toolChoose){case 0:this.stick.gameInit();break;case 1:this.bridge.gameInit()}this.stick.node.x=this.stage.currentPlat.x+this.stage.currentPlat.width/2,this.player.gameInit(),this.shark.gameInit(),this.setTool(),n.default.gameContinueDataInit(),this.configInit(),this.scoreDisplay.string=c.default.totalScore,0==s.default.canResurrectTime&&(this.gameOver.advBtn.active=!1),2==c.default.toolChoose&&this.energy.gameInit(),this.scoreGroup.opacity=255},reStartGame:function(){o.default.loadingScene("game")},gameTouchStartProcessing:function(){c.default.isAnimate||(c.default.isLengthen=!0,c.default.isStartLengthen=!0,1==c.default.toolChoose?this.bridge.buildBridge():2==c.default.toolChoose&&this.player.readyToJump())},gameTouchEndProcessing:function(){if(c.default.isLengthen=!1,!c.default.isAnimate){var e=this.getToolLength();if(c.default.toolChoose<=1)c.default.moveDistance=Math.floor(this.stage.currentPlat.x-this.player.node.x+e+this.stage.currentPlat.width/2);else{var t=Math.floor(this.energy.energy.height/300*600);c.default.moveDistance=Math.floor(this.stage.currentPlat.x-this.player.node.x+t+this.stage.currentPlat.width/2)}this.successOrlose(e),c.default.isShowFog&&this.fog.hideFog(),c.default.isAnimate=!0}},successOrlose:function(e){var t=this,a=this.stage.getLength();if(a.min<=e&&e<=a.max?(this.culculateScore(e,a.min),c.default.isSuccess=!0):c.default.isSuccess=!1,!c.default.isGameOver)switch(c.default.toolChoose){case 0:i.default.toolRotateAni(c.default.isSuccess,this.stick.node),setTimeout(function(){t.player.run()},800);break;case 1:i.default.toolRotateAni(c.default.isSuccess,this.bridge.node),setTimeout(function(){t.player.run()},800);break;case 2:c.default.isSuccess?this.player.successJump(c.default.moveDistance,t.player.jumpHeight):this.player.failJump(c.default.moveDistance,t.player.jumpHeight)}},culculateScore:function(e,t){var a,n=parseInt(this.stage.nextPlat.name.replace(/[^0-9]/gi,"")),i=Math.floor(Math.abs(e-(t+this.stage.nextPlat.width/2)));if(n<=3)a=Math.floor(this.stage.nextPlat.width/9),0<=i&&i<=.5*a?(c.default.nextScore=5,c.default.addScoreGrade=3):.5*a<i&&i<=1.5*a?(c.default.nextScore=4,c.default.addScoreGrade=2):1.5*a<i&&i<=2.5*a?(c.default.nextScore=3,c.default.addScoreGrade=2):2.5*a<i&&i<=3.5*a?(c.default.nextScore=2,c.default.addScoreGrade=1):3.5*a<i&&i<=4.5*a&&(c.default.nextScore=1,c.default.addScoreGrade=1);else switch(n){case 4:a=Math.floor(this.stage.nextPlat.width/7),0<i&&i<=.5*a?(c.default.nextScore=6,c.default.addScoreGrade=3):.5*a<i&&i<=1.5*a?(c.default.nextScore=5,c.default.addScoreGrade=2):1.5*a<i&&i<=2.5*a?(c.default.nextScore=3,c.default.addScoreGrade=2):2.5*a<i&&i<=3.5*a&&(c.default.nextScore=1,c.default.addScoreGrade=1);break;case 5:a=Math.floor(this.stage.nextPlat.width/5),0<i&&i<=.5*a?(c.default.nextScore=7,c.default.addScoreGrade=3):.5*a<i&&i<=1.5*a?(c.default.nextScore=4,c.default.addScoreGrade=2):1.5*a<i&&i<=2.5*a&&(c.default.nextScore=2,c.default.addScoreGrade=1);break;case 6:a=Math.floor(this.stage.nextPlat.width/3),0<i&&i<=.5*a?(c.default.nextScore=8,c.default.addScoreGrade=3):.5*a<i&&i<=1.5*a&&(c.default.nextScore=4,c.default.addScoreGrade=2)}},allMove:function(e){c.default.move+=s.default.gameMoveSpeed,c.default.move>c.default.moveDistance&&e&&e()},getToolLength:function(){return 0==c.default.toolChoose?this.stick.node.height:1==c.default.toolChoose?this.bridge.bridgeY:2==c.default.toolChoose?Math.floor(this.energy.energy.height/300*600):void 0},setTool:function(){0==c.default.toolChoose?this.stick.setStick(this.stage.currentPlat.x+this.stage.currentPlat.width/2):1==c.default.toolChoose?this.bridge.setBridge(this.stage.currentPlat.x+this.stage.currentPlat.width/2):2==c.default.toolChoose&&this.player.stop()},gainScore:function(){c.default.totalScore+=c.default.nextScore,this.scoreDisplay.string=c.default.totalScore},showGameOver:function(){this.canShowGameOver&&(c.default.isGameOver=!0,this.gameOver.showScore(),cc.audioEngine.playEffect(this.gameOverSound,!1,1),this.scheduleOnce(function(){switch(c.default.toolChoose){case 0:this.stick.node.opacity=0;break;case 1:this.bridge.node.opacity=0;break;case 2:this.energy.node.opacity=0}this.scoreGroup.opacity=0,this.gameOver.node.active=!0,this.stage.hideStage()},1.5),this.fog.hideFog(),0==s.default.canResurrectTime?this.gameOver.btnGroup.y=-270:this.gameOver.btnGroup.y=-390),this.canShowGameOver=!1},update:function(e){var t=this;if(c.default.isAnimate&&(c.default.isMove&&c.default.isSuccess&&this.allMove(function(){c.default.isSuccess&&(c.default.isMove=!1,c.default.isAnimate=!1,c.default.move=0,t.stage.createStage(),t.stage.recycleStage(),2!==c.default.toolChoose&&(t.gainScore(),t.scoreAni.showScoreFx()),t.setTool(),t.player.stop(),2==c.default.toolChoose&&t.energy.configInit(),c.default.isStartLengthen=!1)}),!c.default.isSuccess&&c.default.canDrop)){var a=this.stage.currentPlat.x-this.player.node.x+this.stage.currentPlat.width/2;this.player.drop(a),this.showGameOver(),c.default.canDrop=!1}}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager","./utils/GameUITools":"GameUITools","./utils/animation":"animation","./utils/util":"util",GameOver:"GameOver",bridge:"bridge",energy:"energy",fog:"fog",gameBg:"gameBg",player:"player",scoreAni:"scoreAni",shark:"shark",stage:"stage",stick:"stick"}],media:[function(e,t,a){"use strict";cc._RF.push(t,"2c155jeNwZDDbH6onjL9xfT","media");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../gameConfig"));cc.Class({extends:cc.Component,properties:{musicOn:cc.Node,musicOff:cc.Node,bgm:cc.AudioClip,isMusicOn:!0},onLoad:function(){var e=this;cc.loader.load("https://cdn.feilaib.top/img/sounds/bg.mp3",function(t,a){e.bgm=a,e.musicInit()})},start:function(){},musicBtnDispaly:function(){this.musicOff.active=!this.musicOff.active,this.musicOn.active=!this.musicOn.active},musicInit:function(){var e=this;this.musicOn=this.node.getChildByName("musicOn"),this.musicOff=this.node.getChildByName("musicOff"),n.default.isBgmPlay?(this.musicOff.active=!1,cc.audioEngine.playMusic(this.bgm,!0,1)):this.musicOn.active=!1,this.musicOn.on("touchstart",function(){e.musicBtnDispaly(),n.default.isBgmPlay=!1,cc.audioEngine.pauseMusic(e.bgm,!0,1),n.default.isScreemCanTouch=!1,setTimeout(function(){n.default.isScreemCanTouch=!0},300)}),this.musicOff.on("touchstart",function(){e.musicBtnDispaly(),n.default.isBgmPlay=!0,cc.audioEngine.resumeMusic(e.bgm,!0,1),n.default.isScreemCanTouch=!1,setTimeout(function(){n.default.isScreemCanTouch=!0},300)})}}),cc._RF.pop()},{"../gameConfig":"gameConfig"}],modeChoose:[function(e,t,a){"use strict";cc._RF.push(t,"381e0h7o6JIt5IKsu6FA8Up","modeChoose");var n=s(e("../utils/util")),i=s(e("../utils/GameUITools")),o=s(e("../gameDataManager"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{stickMode:cc.Node,bridgeMode:cc.Node,jumpMode:cc.Node,modeChooseShow:[cc.Node],btnSound:{default:null,type:cc.AudioClip}},onLoad:function(){this.init(),this.showChoose()},init:function(){var e=this;n.default.modeBtnEvent(this.stickMode,this.btnSound,function(){o.default.toolChoose=0,i.default.unLoadingLayer(e.node),e.showChoose()}),n.default.modeBtnEvent(this.bridgeMode,this.btnSound,function(){o.default.toolChoose=1,i.default.unLoadingLayer(e.node),e.showChoose()}),n.default.modeBtnEvent(this.jumpMode,this.btnSound,function(){o.default.toolChoose=2,i.default.unLoadingLayer(e.node),e.showChoose()})},showChoose:function(){for(var e=0;e<3;e++)this.modeChooseShow[e].active=!1;this.modeChooseShow[o.default.toolChoose].active=!0},start:function(){},update:function(e){}}),cc._RF.pop()},{"../gameDataManager":"gameDataManager","../utils/GameUITools":"GameUITools","../utils/util":"util"}],player:[function(e,t,a){"use strict";cc._RF.push(t,"92761P8JflM+LTiWgKZjbFt","player");var n=o(e("./gameConfig")),i=o(e("./GameDataManager"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{anim:null,jumpHeight:300},onLoad:function(){this.anim=this.node.getComponent(cc.Animation),this.stop(),this.configInit()},onCollisionEnter:function(e){i.default.isSuccess=!1,i.default.isMove=!1,i.default.isGameOver=!0,this.game.showGameOver(),this.node.stopAllActions(),this.game.stick.node.stopAllActions(),this.game.bridge.node.stopAllActions(),this.fall()},configInit:function(){this.node.x=-210,this.node.y=-295},init:function(e){this.game=e},gameInit:function(){this.configInit(),this.stop()},run:function(){this.anim.play("playerRun").repeatCount=1/0},stop:function(){this.anim.play("playerStand").repeatCount=1},drop:function(e){var t=this,a=cc.moveTo(.5,cc.v2(-210+e,-295)),n=cc.callFunc(function(){t.anim.play("playerFall").repeatCount=1}),i=cc.moveTo(1,cc.v2(-210+e,-1e3)).easing(cc.easeIn(2.5)),o=cc.sequence(a,n,i);this.node.runAction(o)},fall:function(){this.anim.play("playerFall").repeatCount=1;var e=cc.moveTo(1,cc.v2(this.node.x,-1e3)).easing(cc.easeIn(2.5));this.node.runAction(e)},successJump:function(e,t){var a=this;this.anim.play("playerJump");var n=cc.jumpTo(1,cc.v2(-210+e,-295),t,1),o=cc.callFunc(function(){i.default.isSuccess&&(a.stop(),i.default.isMove=!0,a.game.gainScore(),a.game.scoreAni.showScoreFx())}),s=cc.sequence(n,o);this.node.runAction(s)},failJump:function(e,t){var a=this;this.anim.play("playerJump");var n=cc.jumpTo(1,cc.v2(-210+e,-295),t,1),i=cc.callFunc(function(){a.anim.play("playerFall"),a.game.showGameOver()}),o=cc.moveTo(1.5,cc.v2(-210+e,-1e3)).easing(cc.easeIn(2)),s=cc.sequence(n,i,o);this.node.runAction(s)},readyToJump:function(){this.anim.play("playerReadyJump")},update:function(e){2==i.default.toolChoose&&i.default.isSuccess&&i.default.isMove&&(this.node.x-=n.default.gameMoveSpeed)}}),cc._RF.pop()},{"./GameDataManager":"gameDataManager","./gameConfig":"gameConfig"}],rank:[function(e,t,a){"use strict";cc._RF.push(t,"ea993OaclZFSYRp26rCz1XM","rank");var n=s(e("../utils/util")),i=s(e("../utils/GameUITools")),o=s(e("../gameConfig"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{subCanvas:cc.Node,closeBtn:cc.Node,btnSound:{default:null,type:cc.AudioClip}},onLoad:function(){this.init()},init:function(){var e=this;cc.loader.loadRes("panel/subCanvas",function(t,a){if(!t){var n=cc.instantiate(a);e.node.addChild(n)}}),o.default.IS_WX&&(this.tex=new cc.Texture2D,window.sharedCanvas.width=750,window.sharedCanvas.height=1206,wx.postMessage({messageType:2,MAIN_MENU_NUM:o.default.MAIN_MENU_NUM})),this.node.on("touchstart",function(e){e.stopPropagation()}),n.default.btnEvent(this.closeBtn,this.btnSound,function(){o.default.IS_WX&&wx.postMessage({messageType:3,MAIN_MENU_NUM:o.default.MAIN_MENU_NUM}),i.default.unLoadingLayer(e.node)})},start:function(){this.tex=new cc.Texture2D},_updateSubDomainCanvas:function(){if(this.tex){var e=wx.getOpenDataContext().canvas;this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.subCanvas=new cc.SpriteFrame(this.tex)}},update:function(){o.default.IS_WX&&this._updateSubDomainCanvas()}}),cc._RF.pop()},{"../gameConfig":"gameConfig","../utils/GameUITools":"GameUITools","../utils/util":"util"}],rule:[function(e,t,a){"use strict";cc._RF.push(t,"d2830UZLJtPYp+FyYc33J4H","rule");var n=o(e("../utils/util")),i=o(e("../utils/GameUITools"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{rules:cc.Node,ruleCloseBtn:cc.Node,btnSound:{default:null,type:cc.AudioClip}},onLoad:function(){this.init()},init:function(){var e=this;n.default.btnEvent(this.ruleCloseBtn,this.btnSound,function(){i.default.unLoadingLayer(e.node)}),this.node.on("touchstart",function(e){e.stopPropagation()})}}),cc._RF.pop()},{"../utils/GameUITools":"GameUITools","../utils/util":"util"}],scoreAni:[function(e,t,a){"use strict";cc._RF.push(t,"8c32ftISiRC+7K7hY8Ua0mA","scoreAni");var n=o(e("./gameDataManager")),i=o(e("./utils/animation"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{greenAdd:cc.Node,redAdd:cc.Node,yellowAdd:cc.Node,good:cc.Node,great:cc.Node,prefect:cc.Node},onLoad:function(){this.init()},init:function(){for(var e=this.node.children,t=0;t<e.length;t++)e[t].opacity=0},start:function(){},showScoreFx:function(){switch(n.default.addScoreGrade){case 1:this.redAdd.getComponent(cc.Label).string="+"+n.default.nextScore,i.default.scoreFx(this.good,0,0,0,300,1),i.default.scoreFx(this.redAdd,-210,-100,-210,0,1);break;case 2:this.greenAdd.getComponent(cc.Label).string="+"+n.default.nextScore,i.default.scoreFx(this.great,0,0,0,300,1),i.default.scoreFx(this.greenAdd,-210,-100,-210,0,1);break;case 3:this.yellowAdd.getComponent(cc.Label).string="+"+n.default.nextScore,i.default.scoreFx(this.prefect,0,0,0,300,1),i.default.scoreFx(this.yellowAdd,-210,-100,-210,0,1)}}}),cc._RF.pop()},{"./gameDataManager":"gameDataManager","./utils/animation":"animation"}],shark:[function(e,t,a){"use strict";cc._RF.push(t,"c256aHBc0pEY75NrgcUmjQU","shark");o(e("./utils/util")),o(e("./utils/animation")),o(e("./utils/GameUITools"));var n=o(e("./gameConfig")),i=o(e("./gameDataManager"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{sharkFin:cc.Node,sharkAni:cc.Node,sharkSwimSpeed:5,ani:null,isSharkSwim:!0,canSharkJump:!0},init:function(e){this.game=e},onLoad:function(){this.ani=this.sharkAni.getComponent(cc.Animation),this.openCollider(),this.configInit(),this.openSharkTimer()},gameInit:function(){this.openSharkTimer()},openCollider:function(){cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDrawBoundingBox=!0},closeCollider:function(){cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDrawBoundingBox=!1},configInit:function(){this.sharkSwimSpeed=5,this.isSharkSwim=!0,this.sharkFin.width=200,this.sharkFin.active=!0,this.sharkAni.active=!1},openSharkTimer:function(){this.schedule(this.sharkJump,n.default.sharkJumpDurTime)},sharkJump:function(){var e=this;if(!i.default.isGameOver){this.ani.setCurrentTime(0),this.ani.play(),this.isSharkSwim=!1,this.sharkFin.active=!1,this.sharkAni.active=!0,this.sharkAni.x=this.sharkFin.x;var t=cc.callFunc(function(){e.openCollider()}),a=cc.moveTo(1,cc.v2(this.sharkAni.x,200)).easing(cc.easeIn(3)),n=cc.callFunc(function(){e.closeCollider()}),o=cc.jumpTo(.8,cc.v2(this.sharkAni.x-400,200),100,1),s=cc.moveTo(1,cc.v2(this.sharkAni.x-400,-500)),c=cc.callFunc(function(){e.configInit(),e.sharkFin.x=e.sharkAni.x}),u=cc.sequence(t,a,n,o,s,c);this.sharkAni.runAction(u)}i.default.isGameOver&&this.unschedule(this.sharkJump)},start:function(){},update:function(e){this.isSharkSwim&&(this.sharkFin.x-=this.sharkSwimSpeed,this.sharkFin.x<-500&&(this.sharkFin.x=500))}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager","./utils/GameUITools":"GameUITools","./utils/animation":"animation","./utils/util":"util"}],stage:[function(e,t,a){"use strict";cc._RF.push(t,"d8730dAQ/NFJ4QaRBKUkkcH","stage");var n=s(e("./gameConfig")),i=s(e("./gameDataManager")),o=s(e("./utils/util"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{stagePrefabs:[],doneStage:0,canRecycle:!1,currentPlat:{default:null,type:cc.node},nextPlat:{default:null,type:cc.node},nextTwoPlat:{default:null,type:cc.node}},onLoad:function(){var e=this;this.configInit(),this.stagePrefabInit(function(){e.stageInit()})},init:function(e){this.game=e},configInit:function(){this.node.opacity=255,this.canRecycle=!1,this.doneStage=0},gameInit:function(){this.destroyAll(),this.configInit(),this.stageInit()},stagePrefabInit:function(e){for(var t=this,a=0;a<6;a++)cc.loader.loadRes("stage/stage"+(a+1),function(a,n){t.stagePrefabs.push(n),6==t.stagePrefabs.length&&e&&e()})},stageInit:function(){var e,t;switch(this.currentPlat=cc.instantiate(this.stagePrefabs[o.default.randomNum(3)]),this.currentPlat.setPosition(cc.v2(-230,-295)),this.currentPlat.parent=this.node,this.nextPlat=cc.instantiate(this.stagePrefabs[o.default.randomNum(3)]),t=o.default.randomNum(250)+100+(this.currentPlat.width/2+this.nextPlat.width/2),t-=t%n.default.gameMoveSpeed,e=this.currentPlat.x+t,this.nextPlat.setPosition(cc.v2(e,-295)),this.nextPlat.parent=this.node,i.default.toolChoose){case 0:this.game.stick.node.active=!0,this.game.stick.setStick(this.currentPlat.x+this.currentPlat.width/2);break;case 1:this.game.bridge.node.active=!0,this.game.bridge.setBridge(this.currentPlat.x+this.currentPlat.width/2);break;case 2:this.game.energy.showCali(),this.game.energy.setCali()}this.nextTwoPlat=cc.instantiate(this.stagePrefabs[o.default.randomNum(3)]),t=o.default.randomNum(250)+100+(this.nextPlat.width/2+this.nextTwoPlat.width/2),t-=t%n.default.gameMoveSpeed,e=this.nextPlat.x+t,this.nextTwoPlat.setPosition(cc.v2(e,-295)),this.nextTwoPlat.parent=this.node},createStage:function(){this.doneStage+=1;var e=o.default.randomNum(100),t=100-Math.floor(this.doneStage/2)-100*n.default.minMultiProbability;t<100*(1-n.default.maxMultiProbability)&&(t=100*(1-n.default.maxMultiProbability));var a=o.default.randomNum(3);e<t?this.setNextStage(a):1==i.default.toolChoose?this.setNextStage(a+2):this.setNextStage(a+3)},setNextStage:function(e){var t,a,s;this.currentPlat=this.nextPlat,this.nextPlat=this.nextTwoPlat,t=cc.instantiate(this.stagePrefabs[e]),this.nextTwoPlat=t,this.nextTwoPlat.parent=this.node,this.nextTwoPlat.opacity=0,s=o.default.randomNum(250)+100+(this.nextPlat.width/2+this.nextTwoPlat.width/2),s-=s%n.default.gameMoveSpeed,a=this.nextPlat.x+s,this.nextTwoPlat.setPosition(cc.v2(a,-605));var c=cc.moveTo(1,cc.v2(a,-295)),u=cc.fadeIn(1),r=cc.spawn(c,u);this.nextTwoPlat.runAction(r),2!==i.default.toolChoose&&this.doneStage%5==0&&this.game.fog.showFog(this.nextPlat.x,-295),2==i.default.toolChoose&&this.game.energy.setCali()},recycleStage:function(){this.node.removeChild(this.node.children[0])},destroyAll:function(){this.node.removeAllChildren(!0)},getLength:function(){var e=new Object,t=Math.floor(this.nextPlat.x-this.currentPlat.x-(this.nextPlat.width+this.currentPlat.width)/2),a=Math.floor(this.nextPlat.x-this.currentPlat.x+(this.nextPlat.width-this.currentPlat.width)/2);return e.min=t,e.max=a,e},hideStage:function(){this.node.opacity=0},showStage:function(){this.node.opacity=255},update:function(e){if(i.default.isMove)for(var t=this.node.children,a=0;a<t.length;a++)t[a].x-=n.default.gameMoveSpeed}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager","./utils/util":"util"}],start:[function(e,t,a){"use strict";cc._RF.push(t,"4a781FRknlLP6t2uRma8nOy","start");var n=s(e("./gameConfig")),i=s(e("./utils/util")),o=s(e("./utils/GameUITools"));function s(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{startBtn:cc.Node,ruleBtn:cc.Node,rankBtn:cc.Node,modeChooseBtn:cc.Node,btnSound:{default:null,type:cc.AudioClip}},onLoad:function(){this.init()},start:function(){cc.director.preloadScene("game",function(){console.log("\u6e38\u620f\u573a\u666f\u5df2\u52a0\u8f7d")}),this.tex=new cc.Texture2D},init:function(){o.default.loadingLayer("panel/music"),n.default.IS_WX&&o.default.loadingLayer("panel/userInfo"),i.default.btnEvent(this.startBtn,this.btnSound,function(){o.default.loadingScene("game")}),i.default.btnEvent(this.ruleBtn,this.btnSound,function(){o.default.loadingLayer("panel/rule")}),i.default.btnEvent(this.rankBtn,this.btnSound,function(){o.default.loadingLayer("panel/rank")}),i.default.btnEvent(this.modeChooseBtn,this.btnSound,function(){o.default.loadingLayer("panel/modeChoose")})}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./utils/GameUITools":"GameUITools","./utils/util":"util"}],stick:[function(e,t,a){"use strict";cc._RF.push(t,"fb940PcZihLlKcGU29ECPir","stick");var n=o(e("./gameConfig")),i=o(e("./gameDataManager"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{stickLength:70,canLengthen:!1,startLengthen:!1},onLoad:function(){this.configInit(),this.node.active=!1},configInit:function(){this.node.height=n.default.stickLength,this.node.rotation=0},gameInit:function(){this.node.opacity=255,this.node.height=n.default.stickLength,this.node.rotation=0},lengthen:function(e){e&&(this.node.height+=n.default.stickLengthSpeed)},setStick:function(e){this.node.active=!0,this.node.setPosition(cc.v2(e,-305)),this.configInit()},update:function(e){this.lengthen(i.default.isLengthen),i.default.isMove&&(this.node.x-=n.default.gameMoveSpeed)}}),cc._RF.pop()},{"./gameConfig":"gameConfig","./gameDataManager":"gameDataManager"}],subCanvas:[function(e,t,a){"use strict";cc._RF.push(t,"9ea6cviF05Jj5GuSllDVB1D","subCanvas");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../gameConfig"));cc.Class({extends:cc.Component,properties:{},onload:function(){this.init()},init:function(){n.default.IS_WX&&(this.tex=new cc.Texture2D,window.sharedCanvas.width=750,window.sharedCanvas.height=1206)},start:function(){this.tex=new cc.Texture2D},_updateSubDomainCanvas:function(){if(this.tex){var e=wx.getOpenDataContext().canvas;this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.node=new cc.SpriteFrame(this.tex)}},update:function(){n.default.IS_WX&&this._updateSubDomainCanvas()}}),cc._RF.pop()},{"../gameConfig":"gameConfig"}],userInfo:[function(e,t,a){"use strict";cc._RF.push(t,"cbf0bCBr4ZKN7+pR1Gx5PMo","userInfo");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../gameConfig"));cc.Class({extends:cc.Component,properties:{nickName:cc.Label,avatar:cc.Sprite},onLoad:function(){this.getUserInfo()},start:function(){},getUserInfo:function(){var e=this;null==n.default.nickName&&null==n.default.avatarUrl?wx.authorize({scope:"scope.userInfo",success:function(){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]&&wx.getUserInfo({success:function(t){n.default.nickName=t.userInfo.nickName,n.default.avatarUrl=t.userInfo.avatarUrl+"?aaa=aa.jpg",e.nickName.string=t.userInfo.nickName,cc.loader.load(n.default.avatarUrl,function(t,a){var n=new cc.SpriteFrame(a);e.avatar.spriteFrame=n})}})}})}}):(this.nickName.string=n.default.nickName,cc.loader.load(n.default.avatarUrl,function(t,a){var n=new cc.SpriteFrame(a);e.avatar.spriteFrame=n}))}}),cc._RF.pop()},{"../gameConfig":"gameConfig"}],util:[function(e,t,a){"use strict";cc._RF.push(t,"21692qGB49Md4FD07gHVTu1","util"),Object.defineProperty(a,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../gameDataManager"));var i={btnEvent:function(e,t,a){e.on("touchstart",function(){e.setScale(.8),cc.audioEngine.playEffect(t,!1,1)}),e.on("touchend",function(){e.setScale(1),a&&a()}),e.on("touchcancel",function(){e.setScale(1),a&&a()})},modeBtnEvent:function(e,t,a){e.on("touchstart",function(){cc.audioEngine.playEffect(t,!1,1)}),e.on("touchend",function(){a&&a()})},gameStartDataInit:function(){n.default.totalScore=0,n.default.isMove=!1,n.default.isSuccess=!1,n.default.canDrop=!1,n.default.move=0,n.default.isAnimate=!1,n.default.isLengthen=!1,n.default.isStartLengthen=!1,n.default.isGameOver=!1},gameContinueDataInit:function(){n.default.isMove=!1,n.default.isSuccess=!1,n.default.canDrop=!1,n.default.move=0,n.default.isAnimate=!1,n.default.isLengthen=!1,n.default.isStartLengthen=!1,n.default.isGameOver=!1},randomNum:function(e){return Math.floor(Math.random()*e)},getAngle:function(e,t){var a=t.x-e.x,n=t.y-e.y;return 90-360*Math.atan(n/a)/(2*Math.PI)}};a.default=i,t.exports=a.default,cc._RF.pop()},{"../gameDataManager":"gameDataManager"}]},{},["GameOver","bridge","energy","fog","game","gameBg","gameConfig","gameDataManager","media","modeChoose","rank","rule","subCanvas","userInfo","player","scoreAni","shark","stage","start","stick","GameUITools","animation","util"]);